"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initPlayer = exports.decode = void 0;
var MESSAGE_TYPE;
(function (MESSAGE_TYPE) {
    MESSAGE_TYPE[MESSAGE_TYPE["NULL"] = 0] = "NULL";
    MESSAGE_TYPE[MESSAGE_TYPE["INIT"] = 1] = "INIT";
    MESSAGE_TYPE[MESSAGE_TYPE["PLAYER_UPDATE"] = 2] = "PLAYER_UPDATE";
    MESSAGE_TYPE[MESSAGE_TYPE["NEW_PLAYER"] = 3] = "NEW_PLAYER";
})(MESSAGE_TYPE || (MESSAGE_TYPE = {}));
var decode = function (msg) {
    var dv = new DataView(msg);
    var type = dv.getUint8(0);
    switch (type) {
        case MESSAGE_TYPE.INIT:
            console.log("Got INIT from server! Map size: " + dv.getUint16(1));
            break;
    }
};
exports.decode = decode;
var initPlayer = function (socket, name) {
    var message = new ArrayBuffer(1 + name.length);
    var dv = new DataView(message);
    dv.setUint8(0, MESSAGE_TYPE.INIT);
    for (var i = 0; i < name.length; i++) {
        dv.setUint8(i + 1, name.charCodeAt(i));
    }
    socket.send(message);
};
exports.initPlayer = initPlayer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2Vic29ja2V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL21vZHVsZXMvd2Vic29ja2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLElBQUssWUFNSjtBQU5ELFdBQUssWUFBWTtJQUNiLCtDQUFRLENBQUE7SUFDUiwrQ0FBSSxDQUFBO0lBQ0osaUVBQWEsQ0FBQTtJQUNiLDJEQUFVLENBQUE7QUFFZCxDQUFDLEVBTkksWUFBWSxLQUFaLFlBQVksUUFNaEI7QUFFTSxJQUFNLE1BQU0sR0FBRyxVQUFDLEdBQWdCO0lBQ25DLElBQU0sRUFBRSxHQUFHLElBQUksUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzdCLElBQU0sSUFBSSxHQUFHLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFNUIsUUFBTyxJQUFJLEVBQUU7UUFDVCxLQUFLLFlBQVksQ0FBQyxJQUFJO1lBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMscUNBQW1DLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFHLENBQUMsQ0FBQztZQUNsRSxNQUFNO0tBQ2I7QUFDTCxDQUFDLENBQUE7QUFUWSxRQUFBLE1BQU0sVUFTbEI7QUFFTSxJQUFNLFVBQVUsR0FBRyxVQUFDLE1BQWlCLEVBQUUsSUFBWTtJQUN0RCxJQUFNLE9BQU8sR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLEdBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9DLElBQU0sRUFBRSxHQUFHLElBQUksUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBRWpDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVsQyxLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNqQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ3hDO0lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6QixDQUFDLENBQUE7QUFYWSxRQUFBLFVBQVUsY0FXdEIiLCJzb3VyY2VzQ29udGVudCI6WyJlbnVtIE1FU1NBR0VfVFlQRSB7XHJcbiAgICBOVUxMID0gMCxcclxuICAgIElOSVQsXHJcbiAgICBQTEFZRVJfVVBEQVRFLFxyXG4gICAgTkVXX1BMQVlFUixcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkZWNvZGUgPSAobXNnOiBBcnJheUJ1ZmZlcikgPT4ge1xyXG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcobXNnKTtcclxuICAgIGNvbnN0IHR5cGUgPSBkdi5nZXRVaW50OCgwKTtcclxuXHJcbiAgICBzd2l0Y2godHlwZSkge1xyXG4gICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLklOSVQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBHb3QgSU5JVCBmcm9tIHNlcnZlciEgTWFwIHNpemU6ICR7ZHYuZ2V0VWludDE2KDEpfWApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRQbGF5ZXIgPSAoc29ja2V0OiBXZWJTb2NrZXQsIG5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IG5ldyBBcnJheUJ1ZmZlcigxK25hbWUubGVuZ3RoKTtcclxuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KG1lc3NhZ2UpO1xyXG5cclxuICAgIGR2LnNldFVpbnQ4KDAsIE1FU1NBR0VfVFlQRS5JTklUKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGR2LnNldFVpbnQ4KGkrMSwgbmFtZS5jaGFyQ29kZUF0KGkpKTtcclxuICAgIH1cclxuXHJcbiAgICBzb2NrZXQuc2VuZChtZXNzYWdlKTtcclxufSJdfQ==