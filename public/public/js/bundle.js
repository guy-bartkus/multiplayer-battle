(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.randInt = exports.generatePlayerName = void 0;
var descriptiveList = [
    "Green",
    "Blue",
    "Red",
    "Yellow",
    "Brown",
    "Strong",
    "Miserable",
    "Aloof",
    "Pleasant",
    "Invisible",
    "Smelly",
    "Weird",
    "Pungent",
    "Final",
    "Horrid",
    "Nasty",
    "Euphoric",
    "Trippy",
    "Dazed",
    "Dreamy",
    "Drowsy",
    "Foolish",
    "Crippled",
    "Screaming",
    "Poggers",
    "Flaccid",
    "Rotten",
    "Moist",
    "Simple",
    "Tasty",
    "Venti",
    "Grande",
    "Short",
    "Long",
    "Tall",
    "Seedy",
    "Toothy",
    "Robotic",
    "Feisty",
    "Dirty",
    "Soaked",
    "Squishy",
    "Distant",
    "Noobish",
    "Pwned",
    "Lanky",
    "Peppered",
    "Sad",
    "Moldy",
    "Spicy",
    "Bloody",
    "Cute",
    "Daring",
    "Creepy",
    "Curious",
    "Lazy",
    "Tyrant",
    "Anxious",
    "Adorable",
    "Grabby",
    "Handsy",
    "Panicking",
    "Combative",
    "Annoying",
    "Cryptic",
    "Wheezy",
    "Shady",
    "Thinking",
    "Insane",
    "Loose",
    "Limp",
    "Scary",
    "Furious",
    "Ecstatic",
    "Shady",
    "Derpy",
    "Burnt",
    "Tarnished",
    "Messy",
    "Birthday",
    "Alpha",
    "Beta",
    "Soggy",
    "Siamese",
    "Surprised"
];
var thingList = [
    "Dragon",
    "Poop",
    "Snow",
    "Vampire",
    "Hobo",
    "Jerky",
    "Moose",
    "Banana",
    "Coffee",
    "Monster",
    "Pile",
    "Zombie",
    "Mutant",
    "Boomer",
    "Jello",
    "Milk",
    "Boss",
    "Minion",
    "Pervert",
    "Kebab",
    "Frog",
    "Noob",
    "Nub",
    "Life",
    "Dream",
    "Snek",
    "Lizard",
    "Beetle",
    "Cat",
    "Wheezer",
    "Geezer",
    "Creeper",
    "Beast",
    "Peasant",
    "Thief",
    "Tech",
    "Orange",
    "Bread",
    "Wife",
    "Cuckold",
    "Actor",
    "Artist",
    "Doctor",
    "Monkey",
    "Ghost",
    "Camera",
    "Cookie",
    "Dealer",
    "Chef",
    "Knight",
    "Joker",
    "Blob",
    "Member",
    "Bird",
    "Crumpet",
    "Bagel",
    "Toast",
    "Goose",
    "Potato",
    "Dwarve",
    "Elf",
    "Loner",
    "Wolf",
    "Nerd",
    "Shadow"
];
var numList = [
    42,
    69,
    420,
    666,
    777,
    911,
    5000,
    6969,
    9001
];
var generatePlayerName = function () {
    var desc = descriptiveList[(0, exports.randInt)(0, descriptiveList.length)];
    var thing = thingList[(0, exports.randInt)(0, thingList.length)];
    var num = numList[(0, exports.randInt)(0, numList.length)];
    return "" + desc + thing + num;
};
exports.generatePlayerName = generatePlayerName;
var randInt = function (min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
};
exports.randInt = randInt;
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.startGame = void 0;
var startup_1 = require("./startup");
var helpers_1 = require("./helpers");
var websocket_1 = require("./modules/websocket");
var siteLoader = document.getElementById('loader');
var camera = document.querySelector('canvas');
var map_canvas = document.createElement('canvas');
var camera_ctx = camera.getContext('2d');
var map_ctx = camera.getContext('2d');
var mouse = {
    x: 0,
    y: 0
};
var renderBubbles = true;
var ws = new WebSocket("ws://" + window.location.host);
ws.addEventListener('message', function (e) {
    e.data.arrayBuffer().then(function (arrayBuffer) {
        (0, websocket_1.decode)(arrayBuffer);
    });
});
function startGame(username) {
    renderBubbles = false;
    (0, websocket_1.initPlayer)(ws, username);
}
exports.startGame = startGame;
camera.addEventListener('mousemove', function (e) {
    var rect = camera.getBoundingClientRect();
    mouse.x = e.clientX - rect.left;
    mouse.y = e.clientY - rect.top;
});
window.addEventListener('resize', function () {
    resize();
});
startup_1.loginOverlay.addEventListener('click', function (e) {
    addDot(e.clientX, e.clientY, 0, 0);
});
function resize() {
    camera.width = window.innerWidth;
    camera.height = window.innerHeight;
}
var dots = [];
function addDot(x, y, xV, yV) {
    if (x === void 0) { x = (0, helpers_1.randInt)(0, 1920); }
    if (y === void 0) { y = (0, helpers_1.randInt)(0, 1080); }
    if (xV === void 0) { xV = (0, helpers_1.randInt)(-2, 3); }
    if (yV === void 0) { yV = (0, helpers_1.randInt)(-2, 3); }
    dots.push([
        x,
        y,
        xV,
        yV,
        (0, helpers_1.randInt)(0, 360),
        1 //Current size
    ]);
}
setInterval(addDot, 100);
function render() {
    camera_ctx.fillStyle = "#444";
    camera_ctx.fillRect(0, 0, camera.width, camera.height);
    if (renderBubbles) {
        for (var i = 0; i < dots.length; i++) {
            var dot = dots[i];
            camera_ctx.fillStyle = "hsl(" + dot[4] + ", 100%, 50%, " + 0.013333 * (50 - dot[5]) + ")";
            camera_ctx.beginPath();
            camera_ctx.arc(dot[0], dot[1], dot[5], 0, Math.PI * 2);
            camera_ctx.closePath();
            camera_ctx.fill();
            dot[0] += dot[2];
            dot[1] += dot[3];
            dot[5] += 0.5;
            if (dot[5] > 50) {
                dots.splice(i, 1);
            }
        }
    }
    else {
        camera_ctx.fillStyle = "#37bd37";
        camera_ctx.beginPath();
        camera_ctx.arc(mouse.x, mouse.y, 5, 0, Math.PI * 2);
        camera_ctx.fill();
        camera_ctx.closePath();
        camera_ctx.save();
        camera_ctx.setTransform(1, 0, 0, 1, camera.width / 2, camera.height / 2);
        camera_ctx.rotate(Math.atan2(mouse.y - camera.height / 2, mouse.x - camera.width / 2));
        camera_ctx.fillRect(-35, -15, 70, 30);
        camera_ctx.restore();
    }
    requestAnimationFrame(render);
}
(0, startup_1.prepareStartForm)();
resize();
render();
setTimeout(function () {
    siteLoader.classList.add('hidden');
}, 500);
},{"./helpers":1,"./modules/websocket":3,"./startup":4}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initPlayer = exports.decode = void 0;
var MESSAGE_TYPE;
(function (MESSAGE_TYPE) {
    MESSAGE_TYPE[MESSAGE_TYPE["NULL"] = 0] = "NULL";
    MESSAGE_TYPE[MESSAGE_TYPE["INIT"] = 1] = "INIT";
    MESSAGE_TYPE[MESSAGE_TYPE["PLAYER_UPDATE"] = 2] = "PLAYER_UPDATE";
    MESSAGE_TYPE[MESSAGE_TYPE["NEW_PLAYER"] = 3] = "NEW_PLAYER";
})(MESSAGE_TYPE || (MESSAGE_TYPE = {}));
var decode = function (msg) {
    var dv = new DataView(msg);
    var type = dv.getUint8(0);
    switch (type) {
        case MESSAGE_TYPE.INIT:
            console.log("Got INIT from server! Map size: " + dv.getUint16(1));
            break;
    }
};
exports.decode = decode;
var initPlayer = function (socket, name) {
    var message = new ArrayBuffer(1 + name.length);
    var dv = new DataView(message);
    dv.setUint8(0, MESSAGE_TYPE.INIT);
    for (var i = 0; i < name.length; i++) {
        dv.setUint8(i + 1, name.charCodeAt(i));
    }
    socket.send(message);
};
exports.initPlayer = initPlayer;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prepareStartForm = exports.loginOverlay = void 0;
var helpers_1 = require("./helpers");
var index_1 = require("./index");
exports.loginOverlay = document.getElementById('login-overlay');
var startButton = document.getElementById('start-game');
var generateNameButton = document.getElementById('generate-name');
var username = document.getElementById('username');
var gameChatContainer = document.getElementById('game-chat');
var gameChatMessage = document.getElementById('message');
var sendMessageButton = document.getElementById('send-message');
var errorDisplayContainer = document.getElementById('error-display');
var errorList = [];
function prepareStartForm() {
    startButton === null || startButton === void 0 ? void 0 : startButton.addEventListener('click', handleStart);
    generateNameButton === null || generateNameButton === void 0 ? void 0 : generateNameButton.addEventListener('click', generateName);
}
exports.prepareStartForm = prepareStartForm;
function generateName() {
    username.value = (0, helpers_1.generatePlayerName)();
    username.classList.remove();
}
function hideStartForm() {
    exports.loginOverlay.classList.add('hidden');
}
function showGameChat() {
    gameChatContainer.classList.remove('hidden');
    sendMessageButton.addEventListener('click', sendMessage);
}
function sendMessage() {
    if (!gameChatMessage.value.trim().length) {
        return;
    }
    var msg = gameChatMessage.value.trim();
    console.log('sending msg', msg);
    gameChatMessage.value = "";
}
function handleStart() {
    username.classList.remove();
    if (!username.value.trim().length) {
        username.value = (0, helpers_1.generatePlayerName)();
    }
    else if (username.value.trim().length > 20) {
        username.classList.add("error");
        return;
    }
    (0, index_1.startGame)(username.value);
    hideStartForm();
    showGameChat();
}
},{"./helpers":1,"./index":2}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvc3JjL2hlbHBlcnMudHMiLCJwdWJsaWMvc3JjL2luZGV4LnRzIiwicHVibGljL3NyYy9tb2R1bGVzL3dlYnNvY2tldC50cyIsInB1YmxpYy9zcmMvc3RhcnR1cC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztBQ0FBLElBQU0sZUFBZSxHQUFHO0lBQ3BCLE9BQU87SUFDUCxNQUFNO0lBQ04sS0FBSztJQUNMLFFBQVE7SUFDUixPQUFPO0lBQ1AsUUFBUTtJQUNSLFdBQVc7SUFDWCxPQUFPO0lBQ1AsVUFBVTtJQUNWLFdBQVc7SUFDWCxRQUFRO0lBQ1IsT0FBTztJQUNQLFNBQVM7SUFDVCxPQUFPO0lBQ1AsUUFBUTtJQUNSLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsUUFBUTtJQUNSLFNBQVM7SUFDVCxVQUFVO0lBQ1YsV0FBVztJQUNYLFNBQVM7SUFDVCxTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsT0FBTztJQUNQLE9BQU87SUFDUCxRQUFRO0lBQ1IsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sT0FBTztJQUNQLFFBQVE7SUFDUixTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsU0FBUztJQUNULFNBQVM7SUFDVCxTQUFTO0lBQ1QsT0FBTztJQUNQLE9BQU87SUFDUCxVQUFVO0lBQ1YsS0FBSztJQUNMLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLE1BQU07SUFDTixRQUFRO0lBQ1IsUUFBUTtJQUNSLFNBQVM7SUFDVCxNQUFNO0lBQ04sUUFBUTtJQUNSLFNBQVM7SUFDVCxVQUFVO0lBQ1YsUUFBUTtJQUNSLFFBQVE7SUFDUixXQUFXO0lBQ1gsV0FBVztJQUNYLFVBQVU7SUFDVixTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sT0FBTztJQUNQLFNBQVM7SUFDVCxVQUFVO0lBQ1YsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsV0FBVztJQUNYLE9BQU87SUFDUCxVQUFVO0lBQ1YsT0FBTztJQUNQLE1BQU07SUFDTixPQUFPO0lBQ1AsU0FBUztJQUNULFdBQVc7Q0FDZCxDQUFDO0FBQ0YsSUFBTSxTQUFTLEdBQUc7SUFDZCxRQUFRO0lBQ1IsTUFBTTtJQUNOLE1BQU07SUFDTixTQUFTO0lBQ1QsTUFBTTtJQUNOLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLFFBQVE7SUFDUixTQUFTO0lBQ1QsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sTUFBTTtJQUNOLFFBQVE7SUFDUixTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sS0FBSztJQUNMLE1BQU07SUFDTixPQUFPO0lBQ1AsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRO0lBQ1IsS0FBSztJQUNMLFNBQVM7SUFDVCxRQUFRO0lBQ1IsU0FBUztJQUNULE9BQU87SUFDUCxTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixRQUFRO0lBQ1IsT0FBTztJQUNQLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsUUFBUTtJQUNSLFFBQVE7SUFDUixNQUFNO0lBQ04sUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sUUFBUTtJQUNSLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLFFBQVE7SUFDUixLQUFLO0lBQ0wsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sUUFBUTtDQUNYLENBQUM7QUFDRixJQUFNLE9BQU8sR0FBRztJQUNaLEVBQUU7SUFDRixFQUFFO0lBQ0YsR0FBRztJQUNILEdBQUc7SUFDSCxHQUFHO0lBQ0gsR0FBRztJQUNILElBQUk7SUFDSixJQUFJO0lBQ0osSUFBSTtDQUNQLENBQUM7QUFFSyxJQUFNLGtCQUFrQixHQUFHO0lBQzlCLElBQUksSUFBSSxHQUFHLGVBQWUsQ0FBQyxJQUFBLGVBQU8sRUFBQyxDQUFDLEVBQUUsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDL0QsSUFBSSxLQUFLLEdBQUcsU0FBUyxDQUFDLElBQUEsZUFBTyxFQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRCxJQUFJLEdBQUcsR0FBRyxPQUFPLENBQUMsSUFBQSxlQUFPLEVBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQzlDLE9BQU8sS0FBRyxJQUFJLEdBQUcsS0FBSyxHQUFHLEdBQUssQ0FBQztBQUNuQyxDQUFDLENBQUE7QUFMWSxRQUFBLGtCQUFrQixzQkFLOUI7QUFFTSxJQUFNLE9BQU8sR0FBRyxVQUFDLEdBQVUsRUFBRSxHQUFVO0lBQzFDLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JCLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyx1REFBdUQ7QUFDakgsQ0FBQyxDQUFBO0FBSlksUUFBQSxPQUFPLFdBSW5COzs7OztBQ2pMRCxxQ0FBeUQ7QUFDekQscUNBQXNEO0FBQ3RELGlEQUF1RDtBQUV2RCxJQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBRSxDQUFDO0FBRXRELElBQU0sTUFBTSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFFLENBQUM7QUFDakQsSUFBTSxVQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNwRCxJQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBRSxDQUFDO0FBQzVDLElBQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFFLENBQUM7QUFFekMsSUFBTSxLQUFLLEdBQUc7SUFDVixDQUFDLEVBQUUsQ0FBQztJQUNKLENBQUMsRUFBRSxDQUFDO0NBQ1AsQ0FBQztBQUVGLElBQUksYUFBYSxHQUFHLElBQUksQ0FBQztBQUV6QixJQUFNLEVBQUUsR0FBRyxJQUFJLFNBQVMsQ0FBQyxVQUFRLE1BQU0sQ0FBQyxRQUFRLENBQUMsSUFBTSxDQUFDLENBQUM7QUFFekQsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxVQUFBLENBQUM7SUFDM0IsQ0FBQyxDQUFDLElBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBQSxXQUFXO1FBQzNDLElBQUEsa0JBQU0sRUFBQyxXQUFXLENBQUMsQ0FBQztJQUN4QixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBZ0IsU0FBUyxDQUFDLFFBQWU7SUFDckMsYUFBYSxHQUFHLEtBQUssQ0FBQztJQUN0QixJQUFBLHNCQUFVLEVBQUMsRUFBRSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0FBQzdCLENBQUM7QUFIRCw4QkFHQztBQUVELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsVUFBQSxDQUFDO0lBQ2xDLElBQU0sSUFBSSxHQUFHLE1BQU0sQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBRTVDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ2hDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO0FBQ25DLENBQUMsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRTtJQUM5QixNQUFNLEVBQUUsQ0FBQztBQUNiLENBQUMsQ0FBQyxDQUFDO0FBRUgsc0JBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQSxDQUFDO0lBQ3BDLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLENBQUMsQ0FBQyxDQUFDO0FBRUgsU0FBUyxNQUFNO0lBQ1gsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ2pDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQztBQUN2QyxDQUFDO0FBRUQsSUFBTSxJQUFJLEdBQXVELEVBQUUsQ0FBQztBQUVwRSxTQUFTLE1BQU0sQ0FBQyxDQUE0QixFQUFFLENBQTRCLEVBQUUsRUFBMkIsRUFBRSxFQUEyQjtJQUFwSCxrQkFBQSxFQUFBLFFBQVksaUJBQU8sRUFBQyxDQUFDLEVBQUUsSUFBSSxDQUFDO0lBQUUsa0JBQUEsRUFBQSxRQUFZLGlCQUFPLEVBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQztJQUFFLG1CQUFBLEVBQUEsU0FBYSxpQkFBTyxFQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUFFLG1CQUFBLEVBQUEsU0FBYSxpQkFBTyxFQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNoSSxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ04sQ0FBQztRQUNELENBQUM7UUFDRCxFQUFFO1FBQ0YsRUFBRTtRQUNGLElBQUEsaUJBQU8sRUFBQyxDQUFDLEVBQUUsR0FBRyxDQUFDO1FBQ2YsQ0FBQyxDQUFDLGNBQWM7S0FDbkIsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELFdBQVcsQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFFekIsU0FBUyxNQUFNO0lBQ1gsVUFBVSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7SUFFOUIsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRXZELElBQUcsYUFBYSxFQUFFO1FBQ2QsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDakMsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXBCLFVBQVUsQ0FBQyxTQUFTLEdBQUcsU0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLHFCQUFnQixRQUFRLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQUcsQ0FBQztZQUVoRixVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDdkIsVUFBVSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUN2RCxVQUFVLENBQUMsU0FBUyxFQUFFLENBQUM7WUFDdkIsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1lBRWxCLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakIsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNqQixHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksR0FBRyxDQUFDO1lBRWQsSUFBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO2dCQUNaLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2FBQ3JCO1NBQ0o7S0FDSjtTQUFNO1FBQ0gsVUFBVSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7UUFFakMsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3ZCLFVBQVUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNwRCxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDbEIsVUFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBRXZCLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNsQixVQUFVLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsS0FBSyxHQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxHQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25GLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3RDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztLQUN4QjtJQUVELHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2xDLENBQUM7QUFFRCxJQUFBLDBCQUFnQixHQUFFLENBQUM7QUFDbkIsTUFBTSxFQUFFLENBQUM7QUFDVCxNQUFNLEVBQUUsQ0FBQztBQUNULFVBQVUsQ0FBQztJQUNQLFVBQVUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQzs7Ozs7QUNqSFIsSUFBSyxZQU1KO0FBTkQsV0FBSyxZQUFZO0lBQ2IsK0NBQVEsQ0FBQTtJQUNSLCtDQUFJLENBQUE7SUFDSixpRUFBYSxDQUFBO0lBQ2IsMkRBQVUsQ0FBQTtBQUVkLENBQUMsRUFOSSxZQUFZLEtBQVosWUFBWSxRQU1oQjtBQUVNLElBQU0sTUFBTSxHQUFHLFVBQUMsR0FBZ0I7SUFDbkMsSUFBTSxFQUFFLEdBQUcsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDN0IsSUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUU1QixRQUFPLElBQUksRUFBRTtRQUNULEtBQUssWUFBWSxDQUFDLElBQUk7WUFDbEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQ0FBbUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUcsQ0FBQyxDQUFDO1lBQ2xFLE1BQU07S0FDYjtBQUNMLENBQUMsQ0FBQTtBQVRZLFFBQUEsTUFBTSxVQVNsQjtBQUVNLElBQU0sVUFBVSxHQUFHLFVBQUMsTUFBaUIsRUFBRSxJQUFZO0lBQ3RELElBQU0sT0FBTyxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsR0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0MsSUFBTSxFQUFFLEdBQUcsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFakMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRWxDLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ2pDLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDeEM7SUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pCLENBQUMsQ0FBQTtBQVhZLFFBQUEsVUFBVSxjQVd0Qjs7Ozs7QUM5QkQscUNBQTZDO0FBQzdDLGlDQUFrQztBQUVyQixRQUFBLFlBQVksR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBRSxDQUFDO0FBQ3RFLElBQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFFLENBQUM7QUFDM0QsSUFBTSxrQkFBa0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBRSxDQUFDO0FBQ3JFLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFxQixDQUFDO0FBRXpFLElBQU0saUJBQWlCLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUUsQ0FBQztBQUNoRSxJQUFNLGVBQWUsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFNBQVMsQ0FBd0IsQ0FBQztBQUNsRixJQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFFLENBQUM7QUFFbkUsSUFBTSxxQkFBcUIsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBRSxDQUFDO0FBQ3hFLElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUVuQixTQUFnQixnQkFBZ0I7SUFDNUIsV0FBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNwRCxrQkFBa0IsYUFBbEIsa0JBQWtCLHVCQUFsQixrQkFBa0IsQ0FBRSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQUhELDRDQUdDO0FBRUQsU0FBUyxZQUFZO0lBQ2pCLFFBQVEsQ0FBQyxLQUFLLEdBQUcsSUFBQSw0QkFBa0IsR0FBRSxDQUFDO0lBQ3RDLFFBQVEsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDaEMsQ0FBQztBQUVELFNBQVMsYUFBYTtJQUNsQixvQkFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDekMsQ0FBQztBQUNELFNBQVMsWUFBWTtJQUNqQixpQkFBaUIsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdDLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztBQUM3RCxDQUFDO0FBRUQsU0FBUyxXQUFXO0lBQ2hCLElBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRTtRQUN0QyxPQUFNO0tBQ1Q7SUFDRCxJQUFJLEdBQUcsR0FBRyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRWhDLGVBQWUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQy9CLENBQUM7QUFFRCxTQUFTLFdBQVc7SUFDaEIsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUU7UUFDL0IsUUFBUSxDQUFDLEtBQUssR0FBRyxJQUFBLDRCQUFrQixHQUFFLENBQUM7S0FDekM7U0FBTSxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtRQUMxQyxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoQyxPQUFPO0tBQ1Y7SUFDRCxJQUFBLGlCQUFTLEVBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLGFBQWEsRUFBRSxDQUFDO0lBQ2hCLFlBQVksRUFBRSxDQUFDO0FBRW5CLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBkZXNjcmlwdGl2ZUxpc3QgPSBbXHJcbiAgICBcIkdyZWVuXCIsXHJcbiAgICBcIkJsdWVcIixcclxuICAgIFwiUmVkXCIsXHJcbiAgICBcIlllbGxvd1wiLFxyXG4gICAgXCJCcm93blwiLFxyXG4gICAgXCJTdHJvbmdcIixcclxuICAgIFwiTWlzZXJhYmxlXCIsXHJcbiAgICBcIkFsb29mXCIsXHJcbiAgICBcIlBsZWFzYW50XCIsXHJcbiAgICBcIkludmlzaWJsZVwiLFxyXG4gICAgXCJTbWVsbHlcIixcclxuICAgIFwiV2VpcmRcIixcclxuICAgIFwiUHVuZ2VudFwiLFxyXG4gICAgXCJGaW5hbFwiLFxyXG4gICAgXCJIb3JyaWRcIixcclxuICAgIFwiTmFzdHlcIixcclxuICAgIFwiRXVwaG9yaWNcIixcclxuICAgIFwiVHJpcHB5XCIsXHJcbiAgICBcIkRhemVkXCIsXHJcbiAgICBcIkRyZWFteVwiLFxyXG4gICAgXCJEcm93c3lcIixcclxuICAgIFwiRm9vbGlzaFwiLFxyXG4gICAgXCJDcmlwcGxlZFwiLFxyXG4gICAgXCJTY3JlYW1pbmdcIixcclxuICAgIFwiUG9nZ2Vyc1wiLFxyXG4gICAgXCJGbGFjY2lkXCIsXHJcbiAgICBcIlJvdHRlblwiLFxyXG4gICAgXCJNb2lzdFwiLFxyXG4gICAgXCJTaW1wbGVcIixcclxuICAgIFwiVGFzdHlcIixcclxuICAgIFwiVmVudGlcIixcclxuICAgIFwiR3JhbmRlXCIsXHJcbiAgICBcIlNob3J0XCIsXHJcbiAgICBcIkxvbmdcIixcclxuICAgIFwiVGFsbFwiLFxyXG4gICAgXCJTZWVkeVwiLFxyXG4gICAgXCJUb290aHlcIixcclxuICAgIFwiUm9ib3RpY1wiLFxyXG4gICAgXCJGZWlzdHlcIixcclxuICAgIFwiRGlydHlcIixcclxuICAgIFwiU29ha2VkXCIsXHJcbiAgICBcIlNxdWlzaHlcIixcclxuICAgIFwiRGlzdGFudFwiLFxyXG4gICAgXCJOb29iaXNoXCIsXHJcbiAgICBcIlB3bmVkXCIsXHJcbiAgICBcIkxhbmt5XCIsXHJcbiAgICBcIlBlcHBlcmVkXCIsXHJcbiAgICBcIlNhZFwiLFxyXG4gICAgXCJNb2xkeVwiLFxyXG4gICAgXCJTcGljeVwiLFxyXG4gICAgXCJCbG9vZHlcIixcclxuICAgIFwiQ3V0ZVwiLFxyXG4gICAgXCJEYXJpbmdcIixcclxuICAgIFwiQ3JlZXB5XCIsXHJcbiAgICBcIkN1cmlvdXNcIixcclxuICAgIFwiTGF6eVwiLFxyXG4gICAgXCJUeXJhbnRcIixcclxuICAgIFwiQW54aW91c1wiLFxyXG4gICAgXCJBZG9yYWJsZVwiLFxyXG4gICAgXCJHcmFiYnlcIixcclxuICAgIFwiSGFuZHN5XCIsXHJcbiAgICBcIlBhbmlja2luZ1wiLFxyXG4gICAgXCJDb21iYXRpdmVcIixcclxuICAgIFwiQW5ub3lpbmdcIixcclxuICAgIFwiQ3J5cHRpY1wiLFxyXG4gICAgXCJXaGVlenlcIixcclxuICAgIFwiU2hhZHlcIixcclxuICAgIFwiVGhpbmtpbmdcIixcclxuICAgIFwiSW5zYW5lXCIsXHJcbiAgICBcIkxvb3NlXCIsXHJcbiAgICBcIkxpbXBcIixcclxuICAgIFwiU2NhcnlcIixcclxuICAgIFwiRnVyaW91c1wiLFxyXG4gICAgXCJFY3N0YXRpY1wiLFxyXG4gICAgXCJTaGFkeVwiLFxyXG4gICAgXCJEZXJweVwiLFxyXG4gICAgXCJCdXJudFwiLFxyXG4gICAgXCJUYXJuaXNoZWRcIixcclxuICAgIFwiTWVzc3lcIixcclxuICAgIFwiQmlydGhkYXlcIixcclxuICAgIFwiQWxwaGFcIixcclxuICAgIFwiQmV0YVwiLFxyXG4gICAgXCJTb2dneVwiLFxyXG4gICAgXCJTaWFtZXNlXCIsXHJcbiAgICBcIlN1cnByaXNlZFwiXHJcbl07XHJcbmNvbnN0IHRoaW5nTGlzdCA9IFtcclxuICAgIFwiRHJhZ29uXCIsXHJcbiAgICBcIlBvb3BcIixcclxuICAgIFwiU25vd1wiLFxyXG4gICAgXCJWYW1waXJlXCIsXHJcbiAgICBcIkhvYm9cIixcclxuICAgIFwiSmVya3lcIixcclxuICAgIFwiTW9vc2VcIixcclxuICAgIFwiQmFuYW5hXCIsXHJcbiAgICBcIkNvZmZlZVwiLFxyXG4gICAgXCJNb25zdGVyXCIsXHJcbiAgICBcIlBpbGVcIixcclxuICAgIFwiWm9tYmllXCIsXHJcbiAgICBcIk11dGFudFwiLFxyXG4gICAgXCJCb29tZXJcIixcclxuICAgIFwiSmVsbG9cIixcclxuICAgIFwiTWlsa1wiLFxyXG4gICAgXCJCb3NzXCIsXHJcbiAgICBcIk1pbmlvblwiLFxyXG4gICAgXCJQZXJ2ZXJ0XCIsXHJcbiAgICBcIktlYmFiXCIsXHJcbiAgICBcIkZyb2dcIixcclxuICAgIFwiTm9vYlwiLFxyXG4gICAgXCJOdWJcIixcclxuICAgIFwiTGlmZVwiLFxyXG4gICAgXCJEcmVhbVwiLFxyXG4gICAgXCJTbmVrXCIsXHJcbiAgICBcIkxpemFyZFwiLFxyXG4gICAgXCJCZWV0bGVcIixcclxuICAgIFwiQ2F0XCIsXHJcbiAgICBcIldoZWV6ZXJcIixcclxuICAgIFwiR2VlemVyXCIsXHJcbiAgICBcIkNyZWVwZXJcIixcclxuICAgIFwiQmVhc3RcIixcclxuICAgIFwiUGVhc2FudFwiLFxyXG4gICAgXCJUaGllZlwiLFxyXG4gICAgXCJUZWNoXCIsXHJcbiAgICBcIk9yYW5nZVwiLFxyXG4gICAgXCJCcmVhZFwiLFxyXG4gICAgXCJXaWZlXCIsXHJcbiAgICBcIkN1Y2tvbGRcIixcclxuICAgIFwiQWN0b3JcIixcclxuICAgIFwiQXJ0aXN0XCIsXHJcbiAgICBcIkRvY3RvclwiLFxyXG4gICAgXCJNb25rZXlcIixcclxuICAgIFwiR2hvc3RcIixcclxuICAgIFwiQ2FtZXJhXCIsXHJcbiAgICBcIkNvb2tpZVwiLFxyXG4gICAgXCJEZWFsZXJcIixcclxuICAgIFwiQ2hlZlwiLFxyXG4gICAgXCJLbmlnaHRcIixcclxuICAgIFwiSm9rZXJcIixcclxuICAgIFwiQmxvYlwiLFxyXG4gICAgXCJNZW1iZXJcIixcclxuICAgIFwiQmlyZFwiLFxyXG4gICAgXCJDcnVtcGV0XCIsXHJcbiAgICBcIkJhZ2VsXCIsXHJcbiAgICBcIlRvYXN0XCIsXHJcbiAgICBcIkdvb3NlXCIsXHJcbiAgICBcIlBvdGF0b1wiLFxyXG4gICAgXCJEd2FydmVcIixcclxuICAgIFwiRWxmXCIsXHJcbiAgICBcIkxvbmVyXCIsXHJcbiAgICBcIldvbGZcIixcclxuICAgIFwiTmVyZFwiLFxyXG4gICAgXCJTaGFkb3dcIlxyXG5dO1xyXG5jb25zdCBudW1MaXN0ID0gW1xyXG4gICAgNDIsXHJcbiAgICA2OSxcclxuICAgIDQyMCxcclxuICAgIDY2NixcclxuICAgIDc3NyxcclxuICAgIDkxMSxcclxuICAgIDUwMDAsXHJcbiAgICA2OTY5LFxyXG4gICAgOTAwMVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlUGxheWVyTmFtZSA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gICAgbGV0IGRlc2MgPSBkZXNjcmlwdGl2ZUxpc3RbcmFuZEludCgwLCBkZXNjcmlwdGl2ZUxpc3QubGVuZ3RoKV07XHJcbiAgICBsZXQgdGhpbmcgPSB0aGluZ0xpc3RbcmFuZEludCgwLCB0aGluZ0xpc3QubGVuZ3RoKV07XHJcbiAgICBsZXQgbnVtID0gbnVtTGlzdFtyYW5kSW50KDAsIG51bUxpc3QubGVuZ3RoKV07XHJcbiAgICByZXR1cm4gYCR7ZGVzY30ke3RoaW5nfSR7bnVtfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByYW5kSW50ID0gKG1pbjpudW1iZXIsIG1heDpudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pOyAvL1RoZSBtYXhpbXVtIGlzIGV4Y2x1c2l2ZSBhbmQgdGhlIG1pbmltdW0gaXMgaW5jbHVzaXZlXHJcbn0iLCJpbXBvcnQge3ByZXBhcmVTdGFydEZvcm0sIGxvZ2luT3ZlcmxheX0gZnJvbSAnLi9zdGFydHVwJztcclxuaW1wb3J0IHtnZW5lcmF0ZVBsYXllck5hbWUsIHJhbmRJbnR9IGZyb20gJy4vaGVscGVycyc7XHJcbmltcG9ydCB7aW5pdFBsYXllciwgZGVjb2RlfSBmcm9tICcuL21vZHVsZXMvd2Vic29ja2V0JztcclxuXHJcbmNvbnN0IHNpdGVMb2FkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGVyJykhO1xyXG5cclxuY29uc3QgY2FtZXJhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJykhO1xyXG5jb25zdCBtYXBfY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbmNvbnN0IGNhbWVyYV9jdHggPSBjYW1lcmEuZ2V0Q29udGV4dCgnMmQnKSE7XHJcbmNvbnN0IG1hcF9jdHggPSBjYW1lcmEuZ2V0Q29udGV4dCgnMmQnKSE7XHJcblxyXG5jb25zdCBtb3VzZSA9IHtcclxuICAgIHg6IDAsXHJcbiAgICB5OiAwXHJcbn07XHJcblxyXG5sZXQgcmVuZGVyQnViYmxlcyA9IHRydWU7XHJcblxyXG5jb25zdCB3cyA9IG5ldyBXZWJTb2NrZXQoYHdzOi8vJHt3aW5kb3cubG9jYXRpb24uaG9zdH1gKTtcclxuXHJcbndzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBlID0+IHtcclxuICAgIChlLmRhdGEgYXMgQmxvYikuYXJyYXlCdWZmZXIoKS50aGVuKGFycmF5QnVmZmVyID0+IHtcclxuICAgICAgICBkZWNvZGUoYXJyYXlCdWZmZXIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0R2FtZSh1c2VybmFtZTpzdHJpbmcpIHtcclxuICAgIHJlbmRlckJ1YmJsZXMgPSBmYWxzZTtcclxuICAgIGluaXRQbGF5ZXIod3MsIHVzZXJuYW1lKTtcclxufVxyXG5cclxuY2FtZXJhLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4ge1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbWVyYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICBtb3VzZS54ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0O1xyXG4gICAgbW91c2UueSA9IGUuY2xpZW50WSAtIHJlY3QudG9wO1xyXG59KTtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICByZXNpemUoKTtcclxufSk7XHJcblxyXG5sb2dpbk92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcclxuICAgIGFkZERvdChlLmNsaWVudFgsIGUuY2xpZW50WSwgMCwgMCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmVzaXplKCkge1xyXG4gICAgY2FtZXJhLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBjYW1lcmEuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG59XHJcblxyXG5jb25zdCBkb3RzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xyXG5cclxuZnVuY3Rpb24gYWRkRG90KHg6IG51bWJlciA9IHJhbmRJbnQoMCwgMTkyMCksIHk6IG51bWJlciA9IHJhbmRJbnQoMCwgMTA4MCksIHhWOiBudW1iZXIgPSByYW5kSW50KC0yLCAzKSwgeVY6IG51bWJlciA9IHJhbmRJbnQoLTIsIDMpKSB7XHJcbiAgICBkb3RzLnB1c2goW1xyXG4gICAgICAgIHgsIC8veFxyXG4gICAgICAgIHksIC8veVxyXG4gICAgICAgIHhWLFxyXG4gICAgICAgIHlWLFxyXG4gICAgICAgIHJhbmRJbnQoMCwgMzYwKSwgLy9IU0wgaHVlXHJcbiAgICAgICAgMSAvL0N1cnJlbnQgc2l6ZVxyXG4gICAgXSk7XHJcbn1cclxuXHJcbnNldEludGVydmFsKGFkZERvdCwgMTAwKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgIGNhbWVyYV9jdHguZmlsbFN0eWxlID0gXCIjNDQ0XCI7XHJcblxyXG4gICAgY2FtZXJhX2N0eC5maWxsUmVjdCgwLCAwLCBjYW1lcmEud2lkdGgsIGNhbWVyYS5oZWlnaHQpO1xyXG5cclxuICAgIGlmKHJlbmRlckJ1YmJsZXMpIHtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZG90cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkb3QgPSBkb3RzW2ldO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNhbWVyYV9jdHguZmlsbFN0eWxlID0gYGhzbCgke2RvdFs0XX0sIDEwMCUsIDUwJSwgJHswLjAxMzMzMyAqICg1MCAtIGRvdFs1XSl9KWA7XHJcbiAgICBcclxuICAgICAgICAgICAgY2FtZXJhX2N0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY2FtZXJhX2N0eC5hcmMoZG90WzBdLCBkb3RbMV0sIGRvdFs1XSwgMCwgTWF0aC5QSSAqIDIpO1xyXG4gICAgICAgICAgICBjYW1lcmFfY3R4LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICBjYW1lcmFfY3R4LmZpbGwoKTtcclxuICAgIFxyXG4gICAgICAgICAgICBkb3RbMF0gKz0gZG90WzJdO1xyXG4gICAgICAgICAgICBkb3RbMV0gKz0gZG90WzNdO1xyXG4gICAgICAgICAgICBkb3RbNV0gKz0gMC41O1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmKGRvdFs1XSA+IDUwKSB7XHJcbiAgICAgICAgICAgICAgICBkb3RzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5maWxsU3R5bGUgPSBcIiMzN2JkMzdcIjtcclxuXHJcbiAgICAgICAgY2FtZXJhX2N0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjYW1lcmFfY3R4LmFyYyhtb3VzZS54LCBtb3VzZS55LCA1LCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5maWxsKCk7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgY2FtZXJhX2N0eC5zYXZlKCk7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5zZXRUcmFuc2Zvcm0oMSwgMCwgMCwgMSwgY2FtZXJhLndpZHRoLzIsIGNhbWVyYS5oZWlnaHQvMik7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5yb3RhdGUoTWF0aC5hdGFuMihtb3VzZS55IC0gY2FtZXJhLmhlaWdodC8yLCBtb3VzZS54IC0gY2FtZXJhLndpZHRoLzIpKTtcclxuICAgICAgICBjYW1lcmFfY3R4LmZpbGxSZWN0KC0zNSwgLTE1LCA3MCwgMzApO1xyXG4gICAgICAgIGNhbWVyYV9jdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xyXG59XHJcblxyXG5wcmVwYXJlU3RhcnRGb3JtKCk7XHJcbnJlc2l6ZSgpO1xyXG5yZW5kZXIoKTtcclxuc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgc2l0ZUxvYWRlci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxufSwgNTAwKTtcclxuIiwiZW51bSBNRVNTQUdFX1RZUEUge1xyXG4gICAgTlVMTCA9IDAsXHJcbiAgICBJTklULFxyXG4gICAgUExBWUVSX1VQREFURSxcclxuICAgIE5FV19QTEFZRVIsXHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZGVjb2RlID0gKG1zZzogQXJyYXlCdWZmZXIpID0+IHtcclxuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KG1zZyk7XHJcbiAgICBjb25zdCB0eXBlID0gZHYuZ2V0VWludDgoMCk7XHJcblxyXG4gICAgc3dpdGNoKHR5cGUpIHtcclxuICAgICAgICBjYXNlIE1FU1NBR0VfVFlQRS5JTklUOlxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgR290IElOSVQgZnJvbSBzZXJ2ZXIhIE1hcCBzaXplOiAke2R2LmdldFVpbnQxNigxKX1gKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBpbml0UGxheWVyID0gKHNvY2tldDogV2ViU29ja2V0LCBuYW1lOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgQXJyYXlCdWZmZXIoMStuYW1lLmxlbmd0aCk7XHJcbiAgICBjb25zdCBkdiA9IG5ldyBEYXRhVmlldyhtZXNzYWdlKTtcclxuXHJcbiAgICBkdi5zZXRVaW50OCgwLCBNRVNTQUdFX1RZUEUuSU5JVCk7XHJcblxyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG5hbWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBkdi5zZXRVaW50OChpKzEsIG5hbWUuY2hhckNvZGVBdChpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgc29ja2V0LnNlbmQobWVzc2FnZSk7XHJcbn0iLCJpbXBvcnQge2dlbmVyYXRlUGxheWVyTmFtZX0gZnJvbSAnLi9oZWxwZXJzJztcclxuaW1wb3J0IHtzdGFydEdhbWV9IGZyb20gJy4vaW5kZXgnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGxvZ2luT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1vdmVybGF5JykhO1xyXG5jb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1nYW1lJykhO1xyXG5jb25zdCBnZW5lcmF0ZU5hbWVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VuZXJhdGUtbmFtZScpITtcclxuY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3QgZ2FtZUNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jaGF0JykhO1xyXG5jb25zdCBnYW1lQ2hhdE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbmNvbnN0IHNlbmRNZXNzYWdlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtbWVzc2FnZScpITtcclxuXHJcbmNvbnN0IGVycm9yRGlzcGxheUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvci1kaXNwbGF5JykhO1xyXG5sZXQgZXJyb3JMaXN0ID0gW107XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVN0YXJ0Rm9ybSgpIHtcclxuICAgIHN0YXJ0QnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVN0YXJ0KTtcclxuICAgIGdlbmVyYXRlTmFtZUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZW5lcmF0ZU5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU5hbWUoKSB7XHJcbiAgICB1c2VybmFtZS52YWx1ZSA9IGdlbmVyYXRlUGxheWVyTmFtZSgpO1xyXG4gICAgdXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlU3RhcnRGb3JtKCkge1xyXG4gICAgbG9naW5PdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG59XHJcbmZ1bmN0aW9uIHNob3dHYW1lQ2hhdCgpIHtcclxuICAgIGdhbWVDaGF0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgc2VuZE1lc3NhZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZW5kTWVzc2FnZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkge1xyXG4gICAgaWYgKCFnYW1lQ2hhdE1lc3NhZ2UudmFsdWUudHJpbSgpLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG1zZyA9IGdhbWVDaGF0TWVzc2FnZS52YWx1ZS50cmltKCk7XHJcbiAgICBjb25zb2xlLmxvZygnc2VuZGluZyBtc2cnLCBtc2cpO1xyXG5cclxuICAgIGdhbWVDaGF0TWVzc2FnZS52YWx1ZSA9IFwiXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN0YXJ0KCkge1xyXG4gICAgdXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZSgpO1xyXG4gICAgaWYgKCF1c2VybmFtZS52YWx1ZS50cmltKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgdXNlcm5hbWUudmFsdWUgPSBnZW5lcmF0ZVBsYXllck5hbWUoKTtcclxuICAgIH0gZWxzZSBpZiAodXNlcm5hbWUudmFsdWUudHJpbSgpLmxlbmd0aCA+IDIwKSB7XHJcbiAgICAgICAgdXNlcm5hbWUuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHN0YXJ0R2FtZSh1c2VybmFtZS52YWx1ZSk7XHJcbiAgICBoaWRlU3RhcnRGb3JtKCk7XHJcbiAgICBzaG93R2FtZUNoYXQoKTtcclxuICAgIFxyXG59Il19
