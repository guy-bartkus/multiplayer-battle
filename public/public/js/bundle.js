(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.randInt = exports.generatePlayerName = void 0;
var descriptiveList = [
    "Green",
    "Blue",
    "Red",
    "Yellow",
    "Brown",
    "Strong",
    "Miserable",
    "Aloof",
    "Pleasant",
    "Invisible",
    "Smelly",
    "Weird",
    "Pungent",
    "Final",
    "Horrid",
    "Nasty",
    "Euphoric",
    "Trippy",
    "Dazed",
    "Dreamy",
    "Drowsy",
    "Foolish",
    "Crippled",
    "Screaming",
    "Poggers",
    "Flaccid",
    "Rotten",
    "Moist",
    "Simple",
    "Tasty",
    "Venti",
    "Grande",
    "Short",
    "Long",
    "Tall",
    "Seedy",
    "Toothy",
    "Robotic",
    "Feisty",
    "Dirty",
    "Soaked",
    "Squishy",
    "Distant",
    "Noobish",
    "Pwned",
    "Lanky",
    "Peppered",
    "Sad",
    "Moldy",
    "Spicy",
    "Bloody",
    "Cute",
    "Daring",
    "Creepy",
    "Curious",
    "Lazy",
    "Tyrant",
    "Anxious",
    "Adorable",
    "Grabby",
    "Handsy",
    "Panicking",
    "Combative",
    "Annoying",
    "Cryptic",
    "Wheezy",
    "Shady",
    "Thinking",
    "Insane",
    "Loose",
    "Limp",
    "Scary",
    "Furious",
    "Ecstatic",
    "Shady",
    "Derpy",
    "Burnt",
    "Tarnished",
    "Messy",
    "Birthday",
    "Alpha",
    "Beta",
    "Soggy",
    "Siamese",
    "Surprised"
];
var thingList = [
    "Dragon",
    "Poop",
    "Snow",
    "Vampire",
    "Hobo",
    "Jerky",
    "Moose",
    "Banana",
    "Coffee",
    "Monster",
    "Pile",
    "Zombie",
    "Mutant",
    "Boomer",
    "Jello",
    "Milk",
    "Boss",
    "Minion",
    "Pervert",
    "Kebab",
    "Frog",
    "Noob",
    "Nub",
    "Life",
    "Dream",
    "Snek",
    "Lizard",
    "Beetle",
    "Cat",
    "Wheezer",
    "Geezer",
    "Creeper",
    "Beast",
    "Peasant",
    "Thief",
    "Tech",
    "Orange",
    "Bread",
    "Wife",
    "Cuckold",
    "Actor",
    "Artist",
    "Doctor",
    "Monkey",
    "Ghost",
    "Camera",
    "Cookie",
    "Dealer",
    "Chef",
    "Knight",
    "Joker",
    "Blob",
    "Member",
    "Bird",
    "Crumpet",
    "Bagel",
    "Toast",
    "Goose",
    "Potato",
    "Dwarve",
    "Elf",
    "Loner",
    "Wolf",
    "Nerd",
    "Shadow"
];
var numList = [
    42,
    69,
    420,
    666,
    777,
    911,
    5000,
    6969,
    9001
];
var generatePlayerName = function () {
    var desc = descriptiveList[(0, exports.randInt)(0, descriptiveList.length)];
    var thing = thingList[(0, exports.randInt)(0, thingList.length)];
    var num = numList[(0, exports.randInt)(0, numList.length)];
    return "" + desc + thing + num;
};
exports.generatePlayerName = generatePlayerName;
var randInt = function (min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
};
exports.randInt = randInt;
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.startGame = void 0;
var startup_1 = require("./startup");
var helpers_1 = require("./helpers");
var websocket_1 = require("./modules/websocket");
var siteLoader = document.getElementById('loader');
var camera = document.querySelector('canvas');
var map_canvas = document.createElement('canvas');
var camera_ctx = camera.getContext('2d');
var map_ctx = camera.getContext('2d');
var mouse = {
    x: 0,
    y: 0
};
var renderBubbles = true;
var ws = new WebSocket("ws://" + window.location.host);
ws.addEventListener('message', function (e) {
    e.data.arrayBuffer().then(function (arrayBuffer) {
        (0, websocket_1.decode)(arrayBuffer);
    });
});
function startGame(username) {
    renderBubbles = false;
    (0, websocket_1.initPlayer)(ws, username);
}
exports.startGame = startGame;
camera.addEventListener('mousemove', function (e) {
    var rect = camera.getBoundingClientRect();
    mouse.x = e.clientX - rect.left;
    mouse.y = e.clientY - rect.top;
});
window.addEventListener('resize', function () {
    resize();
});
function resize() {
    camera.width = window.innerWidth;
    camera.height = window.innerHeight;
}
var dots = [];
function addDot() {
    dots.push([
        (0, helpers_1.randInt)(0, 1920),
        (0, helpers_1.randInt)(0, 1080),
        (0, helpers_1.randInt)(-2, 3),
        (0, helpers_1.randInt)(-2, 3),
        (0, helpers_1.randInt)(0, 360),
        1 //Current size
    ]);
    if (renderBubbles)
        setTimeout(addDot, (0, helpers_1.randInt)(50, 200));
}
addDot();
function render() {
    camera_ctx.fillStyle = "#444";
    camera_ctx.fillRect(0, 0, camera.width, camera.height);
    if (renderBubbles) {
        for (var i = 0; i < dots.length; i++) {
            var dot = dots[i];
            camera_ctx.fillStyle = "hsl(" + dot[4] + ", 100%, 50%, " + 0.013333 * (50 - dot[5]) + ")";
            camera_ctx.beginPath();
            camera_ctx.arc(dot[0], dot[1], dot[5], 0, Math.PI * 2);
            camera_ctx.closePath();
            camera_ctx.fill();
            dot[0] += dot[2];
            dot[1] += dot[3];
            dot[5] += 0.5;
            if (dot[5] > 50) {
                dots.splice(i, 1);
            }
        }
    }
    else {
        camera_ctx.fillStyle = "#37bd37";
        camera_ctx.beginPath();
        camera_ctx.arc(mouse.x, mouse.y, 5, 0, Math.PI * 2);
        camera_ctx.fill();
        camera_ctx.closePath();
        camera_ctx.save();
        camera_ctx.setTransform(1, 0, 0, 1, camera.width / 2, camera.height / 2);
        camera_ctx.rotate(Math.atan2(mouse.y - camera.height / 2, mouse.x - camera.width / 2));
        camera_ctx.fillRect(-35, -15, 70, 30);
        camera_ctx.restore();
    }
    requestAnimationFrame(render);
}
(0, startup_1.prepareStartForm)();
resize();
render();
setTimeout(function () {
    siteLoader.classList.add('hidden');
}, 500);
},{"./helpers":1,"./modules/websocket":3,"./startup":4}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initPlayer = exports.decode = void 0;
var MESSAGE_TYPE;
(function (MESSAGE_TYPE) {
    MESSAGE_TYPE[MESSAGE_TYPE["NULL"] = 0] = "NULL";
    MESSAGE_TYPE[MESSAGE_TYPE["INIT"] = 1] = "INIT";
    MESSAGE_TYPE[MESSAGE_TYPE["PLAYER_UPDATE"] = 2] = "PLAYER_UPDATE";
    MESSAGE_TYPE[MESSAGE_TYPE["NEW_PLAYER"] = 3] = "NEW_PLAYER";
})(MESSAGE_TYPE || (MESSAGE_TYPE = {}));
var decode = function (msg) {
    var dv = new DataView(msg);
    var type = dv.getUint8(0);
    switch (type) {
        case MESSAGE_TYPE.INIT:
            console.log("Got INIT from server! Map size: " + dv.getUint16(1));
            break;
    }
};
exports.decode = decode;
var initPlayer = function (socket, name) {
    var message = new ArrayBuffer(1 + name.length);
    var dv = new DataView(message);
    dv.setUint8(0, MESSAGE_TYPE.INIT);
    for (var i = 0; i < name.length; i++) {
        dv.setUint8(i + 1, name.charCodeAt(i));
    }
    socket.send(message);
};
exports.initPlayer = initPlayer;
},{}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prepareStartForm = void 0;
var helpers_1 = require("./helpers");
var index_1 = require("./index");
var loginOverlay = document.getElementById('login-overlay');
var startButton = document.getElementById('start-game');
var generateNameButton = document.getElementById('generate-name');
var username = document.getElementById('username');
var gameChatContainer = document.getElementById('game-chat');
var gameChatMessage = document.getElementById('message');
var sendMessageButton = document.getElementById('send-message');
var errorDisplayContainer = document.getElementById('error-display');
var errorList = [];
function prepareStartForm() {
    startButton === null || startButton === void 0 ? void 0 : startButton.addEventListener('click', handleStart);
    generateNameButton === null || generateNameButton === void 0 ? void 0 : generateNameButton.addEventListener('click', generateName);
}
exports.prepareStartForm = prepareStartForm;
function generateName() {
    username.value = (0, helpers_1.generatePlayerName)();
    username.classList.remove();
}
function hideStartForm() {
    loginOverlay.classList.add('hidden');
}
function showGameChat() {
    gameChatContainer.classList.remove('hidden');
    sendMessageButton.addEventListener('click', sendMessage);
}
function sendMessage() {
    if (!gameChatMessage.value.trim().length) {
        return;
    }
    var msg = gameChatMessage.value.trim();
    console.log('sending msg', msg);
    gameChatMessage.value = "";
}
function handleStart() {
    username.classList.remove();
    if (!username.value.trim().length) {
        username.value = (0, helpers_1.generatePlayerName)();
    }
    else if (username.value.trim().length > 20) {
        username.classList.add("error");
        return;
    }
    (0, index_1.startGame)(username.value);
    hideStartForm();
    showGameChat();
}
},{"./helpers":1,"./index":2}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvc3JjL2hlbHBlcnMudHMiLCJwdWJsaWMvc3JjL2luZGV4LnRzIiwicHVibGljL3NyYy9tb2R1bGVzL3dlYnNvY2tldC50cyIsInB1YmxpYy9zcmMvc3RhcnR1cC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztBQ0FBLElBQU0sZUFBZSxHQUFHO0lBQ3BCLE9BQU87SUFDUCxNQUFNO0lBQ04sS0FBSztJQUNMLFFBQVE7SUFDUixPQUFPO0lBQ1AsUUFBUTtJQUNSLFdBQVc7SUFDWCxPQUFPO0lBQ1AsVUFBVTtJQUNWLFdBQVc7SUFDWCxRQUFRO0lBQ1IsT0FBTztJQUNQLFNBQVM7SUFDVCxPQUFPO0lBQ1AsUUFBUTtJQUNSLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsUUFBUTtJQUNSLFNBQVM7SUFDVCxVQUFVO0lBQ1YsV0FBVztJQUNYLFNBQVM7SUFDVCxTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsT0FBTztJQUNQLE9BQU87SUFDUCxRQUFRO0lBQ1IsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sT0FBTztJQUNQLFFBQVE7SUFDUixTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsU0FBUztJQUNULFNBQVM7SUFDVCxTQUFTO0lBQ1QsT0FBTztJQUNQLE9BQU87SUFDUCxVQUFVO0lBQ1YsS0FBSztJQUNMLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLE1BQU07SUFDTixRQUFRO0lBQ1IsUUFBUTtJQUNSLFNBQVM7SUFDVCxNQUFNO0lBQ04sUUFBUTtJQUNSLFNBQVM7SUFDVCxVQUFVO0lBQ1YsUUFBUTtJQUNSLFFBQVE7SUFDUixXQUFXO0lBQ1gsV0FBVztJQUNYLFVBQVU7SUFDVixTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sT0FBTztJQUNQLFNBQVM7SUFDVCxVQUFVO0lBQ1YsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsV0FBVztJQUNYLE9BQU87SUFDUCxVQUFVO0lBQ1YsT0FBTztJQUNQLE1BQU07SUFDTixPQUFPO0lBQ1AsU0FBUztJQUNULFdBQVc7Q0FDZCxDQUFDO0FBQ0YsSUFBTSxTQUFTLEdBQUc7SUFDZCxRQUFRO0lBQ1IsTUFBTTtJQUNOLE1BQU07SUFDTixTQUFTO0lBQ1QsTUFBTTtJQUNOLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLFFBQVE7SUFDUixTQUFTO0lBQ1QsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sTUFBTTtJQUNOLFFBQVE7SUFDUixTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sS0FBSztJQUNMLE1BQU07SUFDTixPQUFPO0lBQ1AsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRO0lBQ1IsS0FBSztJQUNMLFNBQVM7SUFDVCxRQUFRO0lBQ1IsU0FBUztJQUNULE9BQU87SUFDUCxTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixRQUFRO0lBQ1IsT0FBTztJQUNQLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsUUFBUTtJQUNSLFFBQVE7SUFDUixNQUFNO0lBQ04sUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sUUFBUTtJQUNSLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLFFBQVE7SUFDUixLQUFLO0lBQ0wsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sUUFBUTtDQUNYLENBQUM7QUFDRixJQUFNLE9BQU8sR0FBRztJQUNaLEVBQUU7SUFDRixFQUFF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LEdBQUcsR0FBRyxlQUFlLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRWhDLGVBQWUsQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQy9CLENBQUM7QUFFRCxTQUFTLFdBQVc7SUFDaEIsUUFBUSxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUM1QixJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLEVBQUU7UUFDL0IsUUFBUSxDQUFDLEtBQUssR0FBRyxJQUFBLDRCQUFrQixHQUFFLENBQUM7S0FDekM7U0FBTSxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtRQUMxQyxRQUFRLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNoQyxPQUFPO0tBQ1Y7SUFDRCxJQUFBLGlCQUFTLEVBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLGFBQWEsRUFBRSxDQUFDO0lBQ2hCLFlBQVksRUFBRSxDQUFDO0FBRW5CLENBQUMiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJjb25zdCBkZXNjcmlwdGl2ZUxpc3QgPSBbXHJcbiAgICBcIkdyZWVuXCIsXHJcbiAgICBcIkJsdWVcIixcclxuICAgIFwiUmVkXCIsXHJcbiAgICBcIlllbGxvd1wiLFxyXG4gICAgXCJCcm93blwiLFxyXG4gICAgXCJTdHJvbmdcIixcclxuICAgIFwiTWlzZXJhYmxlXCIsXHJcbiAgICBcIkFsb29mXCIsXHJcbiAgICBcIlBsZWFzYW50XCIsXHJcbiAgICBcIkludmlzaWJsZVwiLFxyXG4gICAgXCJTbWVsbHlcIixcclxuICAgIFwiV2VpcmRcIixcclxuICAgIFwiUHVuZ2VudFwiLFxyXG4gICAgXCJGaW5hbFwiLFxyXG4gICAgXCJIb3JyaWRcIixcclxuICAgIFwiTmFzdHlcIixcclxuICAgIFwiRXVwaG9yaWNcIixcclxuICAgIFwiVHJpcHB5XCIsXHJcbiAgICBcIkRhemVkXCIsXHJcbiAgICBcIkRyZWFteVwiLFxyXG4gICAgXCJEcm93c3lcIixcclxuICAgIFwiRm9vbGlzaFwiLFxyXG4gICAgXCJDcmlwcGxlZFwiLFxyXG4gICAgXCJTY3JlYW1pbmdcIixcclxuICAgIFwiUG9nZ2Vyc1wiLFxyXG4gICAgXCJGbGFjY2lkXCIsXHJcbiAgICBcIlJvdHRlblwiLFxyXG4gICAgXCJNb2lzdFwiLFxyXG4gICAgXCJTaW1wbGVcIixcclxuICAgIFwiVGFzdHlcIixcclxuICAgIFwiVmVudGlcIixcclxuICAgIFwiR3JhbmRlXCIsXHJcbiAgICBcIlNob3J0XCIsXHJcbiAgICBcIkxvbmdcIixcclxuICAgIFwiVGFsbFwiLFxyXG4gICAgXCJTZWVkeVwiLFxyXG4gICAgXCJUb290aHlcIixcclxuICAgIFwiUm9ib3RpY1wiLFxyXG4gICAgXCJGZWlzdHlcIixcclxuICAgIFwiRGlydHlcIixcclxuICAgIFwiU29ha2VkXCIsXHJcbiAgICBcIlNxdWlzaHlcIixcclxuICAgIFwiRGlzdGFudFwiLFxyXG4gICAgXCJOb29iaXNoXCIsXHJcbiAgICBcIlB3bmVkXCIsXHJcbiAgICBcIkxhbmt5XCIsXHJcbiAgICBcIlBlcHBlcmVkXCIsXHJcbiAgICBcIlNhZFwiLFxyXG4gICAgXCJNb2xkeVwiLFxyXG4gICAgXCJTcGljeVwiLFxyXG4gICAgXCJCbG9vZHlcIixcclxuICAgIFwiQ3V0ZVwiLFxyXG4gICAgXCJEYXJpbmdcIixcclxuICAgIFwiQ3JlZXB5XCIsXHJcbiAgICBcIkN1cmlvdXNcIixcclxuICAgIFwiTGF6eVwiLFxyXG4gICAgXCJUeXJhbnRcIixcclxuICAgIFwiQW54aW91c1wiLFxyXG4gICAgXCJBZG9yYWJsZVwiLFxyXG4gICAgXCJHcmFiYnlcIixcclxuICAgIFwiSGFuZHN5XCIsXHJcbiAgICBcIlBhbmlja2luZ1wiLFxyXG4gICAgXCJDb21iYXRpdmVcIixcclxuICAgIFwiQW5ub3lpbmdcIixcclxuICAgIFwiQ3J5cHRpY1wiLFxyXG4gICAgXCJXaGVlenlcIixcclxuICAgIFwiU2hhZHlcIixcclxuICAgIFwiVGhpbmtpbmdcIixcclxuICAgIFwiSW5zYW5lXCIsXHJcbiAgICBcIkxvb3NlXCIsXHJcbiAgICBcIkxpbXBcIixcclxuICAgIFwiU2NhcnlcIixcclxuICAgIFwiRnVyaW91c1wiLFxyXG4gICAgXCJFY3N0YXRpY1wiLFxyXG4gICAgXCJTaGFkeVwiLFxyXG4gICAgXCJEZXJweVwiLFxyXG4gICAgXCJCdXJudFwiLFxyXG4gICAgXCJUYXJuaXNoZWRcIixcclxuICAgIFwiTWVzc3lcIixcclxuICAgIFwiQmlydGhkYXlcIixcclxuICAgIFwiQWxwaGFcIixcclxuICAgIFwiQmV0YVwiLFxyXG4gICAgXCJTb2dneVwiLFxyXG4gICAgXCJTaWFtZXNlXCIsXHJcbiAgICBcIlN1cnByaXNlZFwiXHJcbl07XHJcbmNvbnN0IHRoaW5nTGlzdCA9IFtcclxuICAgIFwiRHJhZ29uXCIsXHJcbiAgICBcIlBvb3BcIixcclxuICAgIFwiU25vd1wiLFxyXG4gICAgXCJWYW1waXJlXCIsXHJcbiAgICBcIkhvYm9cIixcclxuICAgIFwiSmVya3lcIixcclxuICAgIFwiTW9vc2VcIixcclxuICAgIFwiQmFuYW5hXCIsXHJcbiAgICBcIkNvZmZlZVwiLFxyXG4gICAgXCJNb25zdGVyXCIsXHJcbiAgICBcIlBpbGVcIixcclxuICAgIFwiWm9tYmllXCIsXHJcbiAgICBcIk11dGFudFwiLFxyXG4gICAgXCJCb29tZXJcIixcclxuICAgIFwiSmVsbG9cIixcclxuICAgIFwiTWlsa1wiLFxyXG4gICAgXCJCb3NzXCIsXHJcbiAgICBcIk1pbmlvblwiLFxyXG4gICAgXCJQZXJ2ZXJ0XCIsXHJcbiAgICBcIktlYmFiXCIsXHJcbiAgICBcIkZyb2dcIixcclxuICAgIFwiTm9vYlwiLFxyXG4gICAgXCJOdWJcIixcclxuICAgIFwiTGlmZVwiLFxyXG4gICAgXCJEcmVhbVwiLFxyXG4gICAgXCJTbmVrXCIsXHJcbiAgICBcIkxpemFyZFwiLFxyXG4gICAgXCJCZWV0bGVcIixcclxuICAgIFwiQ2F0XCIsXHJcbiAgICBcIldoZWV6ZXJcIixcclxuICAgIFwiR2VlemVyXCIsXHJcbiAgICBcIkNyZWVwZXJcIixcclxuICAgIFwiQmVhc3RcIixcclxuICAgIFwiUGVhc2FudFwiLFxyXG4gICAgXCJUaGllZlwiLFxyXG4gICAgXCJUZWNoXCIsXHJcbiAgICBcIk9yYW5nZVwiLFxyXG4gICAgXCJCcmVhZFwiLFxyXG4gICAgXCJXaWZlXCIsXHJcbiAgICBcIkN1Y2tvbGRcIixcclxuICAgIFwiQWN0b3JcIixcclxuICAgIFwiQXJ0aXN0XCIsXHJcbiAgICBcIkRvY3RvclwiLFxyXG4gICAgXCJNb25rZXlcIixcclxuICAgIFwiR2hvc3RcIixcclxuICAgIFwiQ2FtZXJhXCIsXHJcbiAgICBcIkNvb2tpZVwiLFxyXG4gICAgXCJEZWFsZXJcIixcclxuICAgIFwiQ2hlZlwiLFxyXG4gICAgXCJLbmlnaHRcIixcclxuICAgIFwiSm9rZXJcIixcclxuICAgIFwiQmxvYlwiLFxyXG4gICAgXCJNZW1iZXJcIixcclxuICAgIFwiQmlyZFwiLFxyXG4gICAgXCJDcnVtcGV0XCIsXHJcbiAgICBcIkJhZ2VsXCIsXHJcbiAgICBcIlRvYXN0XCIsXHJcbiAgICBcIkdvb3NlXCIsXHJcbiAgICBcIlBvdGF0b1wiLFxyXG4gICAgXCJEd2FydmVcIixcclxuICAgIFwiRWxmXCIsXHJcbiAgICBcIkxvbmVyXCIsXHJcbiAgICBcIldvbGZcIixcclxuICAgIFwiTmVyZFwiLFxyXG4gICAgXCJTaGFkb3dcIlxyXG5dO1xyXG5jb25zdCBudW1MaXN0ID0gW1xyXG4gICAgNDIsXHJcbiAgICA2OSxcclxuICAgIDQyMCxcclxuICAgIDY2NixcclxuICAgIDc3NyxcclxuICAgIDkxMSxcclxuICAgIDUwMDAsXHJcbiAgICA2OTY5LFxyXG4gICAgOTAwMVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlUGxheWVyTmFtZSA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gICAgbGV0IGRlc2MgPSBkZXNjcmlwdGl2ZUxpc3RbcmFuZEludCgwLCBkZXNjcmlwdGl2ZUxpc3QubGVuZ3RoKV07XHJcbiAgICBsZXQgdGhpbmcgPSB0aGluZ0xpc3RbcmFuZEludCgwLCB0aGluZ0xpc3QubGVuZ3RoKV07XHJcbiAgICBsZXQgbnVtID0gbnVtTGlzdFtyYW5kSW50KDAsIG51bUxpc3QubGVuZ3RoKV07XHJcbiAgICByZXR1cm4gYCR7ZGVzY30ke3RoaW5nfSR7bnVtfWA7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByYW5kSW50ID0gKG1pbjpudW1iZXIsIG1heDpudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgbWluID0gTWF0aC5jZWlsKG1pbik7XHJcbiAgICBtYXggPSBNYXRoLmZsb29yKG1heCk7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pOyAvL1RoZSBtYXhpbXVtIGlzIGV4Y2x1c2l2ZSBhbmQgdGhlIG1pbmltdW0gaXMgaW5jbHVzaXZlXHJcbn0iLCJpbXBvcnQge3ByZXBhcmVTdGFydEZvcm19IGZyb20gJy4vc3RhcnR1cCc7XHJcbmltcG9ydCB7Z2VuZXJhdGVQbGF5ZXJOYW1lLCByYW5kSW50fSBmcm9tICcuL2hlbHBlcnMnO1xyXG5pbXBvcnQge2luaXRQbGF5ZXIsIGRlY29kZX0gZnJvbSAnLi9tb2R1bGVzL3dlYnNvY2tldCc7XHJcblxyXG5jb25zdCBzaXRlTG9hZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRlcicpITtcclxuXHJcbmNvbnN0IGNhbWVyYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpITtcclxuY29uc3QgbWFwX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5jb25zdCBjYW1lcmFfY3R4ID0gY2FtZXJhLmdldENvbnRleHQoJzJkJykhO1xyXG5jb25zdCBtYXBfY3R4ID0gY2FtZXJhLmdldENvbnRleHQoJzJkJykhO1xyXG5cclxuY29uc3QgbW91c2UgPSB7XHJcbiAgICB4OiAwLFxyXG4gICAgeTogMFxyXG59O1xyXG5cclxubGV0IHJlbmRlckJ1YmJsZXMgPSB0cnVlO1xyXG5cclxuY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KGB3czovLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9YCk7XHJcblxyXG53cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZSA9PiB7XHJcbiAgICAoZS5kYXRhIGFzIEJsb2IpLmFycmF5QnVmZmVyKCkudGhlbihhcnJheUJ1ZmZlciA9PiB7XHJcbiAgICAgICAgZGVjb2RlKGFycmF5QnVmZmVyKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdGFydEdhbWUodXNlcm5hbWU6c3RyaW5nKSB7XHJcbiAgICByZW5kZXJCdWJibGVzID0gZmFsc2U7XHJcbiAgICBpbml0UGxheWVyKHdzLCB1c2VybmFtZSk7XHJcbn1cclxuXHJcbmNhbWVyYS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcclxuICAgIGNvbnN0IHJlY3QgPSBjYW1lcmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgbW91c2UueCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDtcclxuICAgIG1vdXNlLnkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDtcclxufSk7XHJcblxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgcmVzaXplKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gcmVzaXplKCkge1xyXG4gICAgY2FtZXJhLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICBjYW1lcmEuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG59XHJcblxyXG5jb25zdCBkb3RzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xyXG5cclxuZnVuY3Rpb24gYWRkRG90KCkge1xyXG4gICAgZG90cy5wdXNoKFtcclxuICAgICAgICByYW5kSW50KDAsIDE5MjApLCAvL3hcclxuICAgICAgICByYW5kSW50KDAsIDEwODApLCAvL3lcclxuICAgICAgICByYW5kSW50KC0yLCAzKSxcclxuICAgICAgICByYW5kSW50KC0yLCAzKSxcclxuICAgICAgICByYW5kSW50KDAsIDM2MCksIC8vSFNMIGh1ZVxyXG4gICAgICAgIDEgLy9DdXJyZW50IHNpemVcclxuICAgIF0pO1xyXG5cclxuICAgIGlmKHJlbmRlckJ1YmJsZXMpIHNldFRpbWVvdXQoYWRkRG90LCByYW5kSW50KDUwLCAyMDApKTtcclxufVxyXG5cclxuYWRkRG90KCk7XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICBjYW1lcmFfY3R4LmZpbGxTdHlsZSA9IFwiIzQ0NFwiO1xyXG5cclxuICAgIGNhbWVyYV9jdHguZmlsbFJlY3QoMCwgMCwgY2FtZXJhLndpZHRoLCBjYW1lcmEuaGVpZ2h0KTtcclxuXHJcbiAgICBpZihyZW5kZXJCdWJibGVzKSB7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRvdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZG90ID0gZG90c1tpXTtcclxuICAgIFxyXG4gICAgICAgICAgICBjYW1lcmFfY3R4LmZpbGxTdHlsZSA9IGBoc2woJHtkb3RbNF19LCAxMDAlLCA1MCUsICR7MC4wMTMzMzMgKiAoNTAgLSBkb3RbNV0pfSlgO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGNhbWVyYV9jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIGNhbWVyYV9jdHguYXJjKGRvdFswXSwgZG90WzFdLCBkb3RbNV0sIDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICAgICAgY2FtZXJhX2N0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY2FtZXJhX2N0eC5maWxsKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgZG90WzBdICs9IGRvdFsyXTtcclxuICAgICAgICAgICAgZG90WzFdICs9IGRvdFszXTtcclxuICAgICAgICAgICAgZG90WzVdICs9IDAuNTtcclxuICAgIFxyXG4gICAgICAgICAgICBpZihkb3RbNV0gPiA1MCkge1xyXG4gICAgICAgICAgICAgICAgZG90cy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNhbWVyYV9jdHguZmlsbFN0eWxlID0gXCIjMzdiZDM3XCI7XHJcblxyXG4gICAgICAgIGNhbWVyYV9jdHguYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5hcmMobW91c2UueCwgbW91c2UueSwgNSwgMCwgTWF0aC5QSSAqIDIpO1xyXG4gICAgICAgIGNhbWVyYV9jdHguZmlsbCgpO1xyXG4gICAgICAgIGNhbWVyYV9jdHguY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGNhbWVyYV9jdHguc2F2ZSgpO1xyXG4gICAgICAgIGNhbWVyYV9jdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIGNhbWVyYS53aWR0aC8yLCBjYW1lcmEuaGVpZ2h0LzIpO1xyXG4gICAgICAgIGNhbWVyYV9jdHgucm90YXRlKE1hdGguYXRhbjIobW91c2UueSAtIGNhbWVyYS5oZWlnaHQvMiwgbW91c2UueCAtIGNhbWVyYS53aWR0aC8yKSk7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5maWxsUmVjdCgtMzUsIC0xNSwgNzAsIDMwKTtcclxuICAgICAgICBjYW1lcmFfY3R4LnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcclxufVxyXG5cclxucHJlcGFyZVN0YXJ0Rm9ybSgpO1xyXG5yZXNpemUoKTtcclxucmVuZGVyKCk7XHJcbnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgIHNpdGVMb2FkZXIuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbn0sIDUwMCk7XHJcbiIsImVudW0gTUVTU0FHRV9UWVBFIHtcclxuICAgIE5VTEwgPSAwLFxyXG4gICAgSU5JVCxcclxuICAgIFBMQVlFUl9VUERBVEUsXHJcbiAgICBORVdfUExBWUVSLFxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGRlY29kZSA9IChtc2c6IEFycmF5QnVmZmVyKSA9PiB7XHJcbiAgICBjb25zdCBkdiA9IG5ldyBEYXRhVmlldyhtc2cpO1xyXG4gICAgY29uc3QgdHlwZSA9IGR2LmdldFVpbnQ4KDApO1xyXG5cclxuICAgIHN3aXRjaCh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBNRVNTQUdFX1RZUEUuSU5JVDpcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYEdvdCBJTklUIGZyb20gc2VydmVyISBNYXAgc2l6ZTogJHtkdi5nZXRVaW50MTYoMSl9YCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdFBsYXllciA9IChzb2NrZXQ6IFdlYlNvY2tldCwgbmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gbmV3IEFycmF5QnVmZmVyKDErbmFtZS5sZW5ndGgpO1xyXG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcobWVzc2FnZSk7XHJcblxyXG4gICAgZHYuc2V0VWludDgoMCwgTUVTU0FHRV9UWVBFLklOSVQpO1xyXG5cclxuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBuYW1lLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZHYuc2V0VWludDgoaSsxLCBuYW1lLmNoYXJDb2RlQXQoaSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHNvY2tldC5zZW5kKG1lc3NhZ2UpO1xyXG59IiwiaW1wb3J0IHtnZW5lcmF0ZVBsYXllck5hbWV9IGZyb20gJy4vaGVscGVycyc7XHJcbmltcG9ydCB7c3RhcnRHYW1lfSBmcm9tICcuL2luZGV4JztcclxuXHJcbmNvbnN0IGxvZ2luT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1vdmVybGF5JykhO1xyXG5jb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydC1nYW1lJykhO1xyXG5jb25zdCBnZW5lcmF0ZU5hbWVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VuZXJhdGUtbmFtZScpITtcclxuY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlcm5hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuY29uc3QgZ2FtZUNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2FtZS1jaGF0JykhO1xyXG5jb25zdCBnYW1lQ2hhdE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZScpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbmNvbnN0IHNlbmRNZXNzYWdlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbmQtbWVzc2FnZScpITtcclxuXHJcbmNvbnN0IGVycm9yRGlzcGxheUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlcnJvci1kaXNwbGF5JykhO1xyXG5sZXQgZXJyb3JMaXN0ID0gW107XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJlcGFyZVN0YXJ0Rm9ybSgpIHtcclxuICAgIHN0YXJ0QnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVN0YXJ0KTtcclxuICAgIGdlbmVyYXRlTmFtZUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZW5lcmF0ZU5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU5hbWUoKSB7XHJcbiAgICB1c2VybmFtZS52YWx1ZSA9IGdlbmVyYXRlUGxheWVyTmFtZSgpO1xyXG4gICAgdXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlU3RhcnRGb3JtKCkge1xyXG4gICAgbG9naW5PdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG59XHJcbmZ1bmN0aW9uIHNob3dHYW1lQ2hhdCgpIHtcclxuICAgIGdhbWVDaGF0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgc2VuZE1lc3NhZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZW5kTWVzc2FnZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkge1xyXG4gICAgaWYgKCFnYW1lQ2hhdE1lc3NhZ2UudmFsdWUudHJpbSgpLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG1zZyA9IGdhbWVDaGF0TWVzc2FnZS52YWx1ZS50cmltKCk7XHJcbiAgICBjb25zb2xlLmxvZygnc2VuZGluZyBtc2cnLCBtc2cpO1xyXG5cclxuICAgIGdhbWVDaGF0TWVzc2FnZS52YWx1ZSA9IFwiXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN0YXJ0KCkge1xyXG4gICAgdXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZSgpO1xyXG4gICAgaWYgKCF1c2VybmFtZS52YWx1ZS50cmltKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgdXNlcm5hbWUudmFsdWUgPSBnZW5lcmF0ZVBsYXllck5hbWUoKTtcclxuICAgIH0gZWxzZSBpZiAodXNlcm5hbWUudmFsdWUudHJpbSgpLmxlbmd0aCA+IDIwKSB7XHJcbiAgICAgICAgdXNlcm5hbWUuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHN0YXJ0R2FtZSh1c2VybmFtZS52YWx1ZSk7XHJcbiAgICBoaWRlU3RhcnRGb3JtKCk7XHJcbiAgICBzaG93R2FtZUNoYXQoKTtcclxuICAgIFxyXG59Il19
