(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.randInt = exports.generatePlayerName = void 0;
var descriptiveList = [
    "Green",
    "Blue",
    "Red",
    "Yellow",
    "Brown",
    "Strong",
    "Miserable",
    "Aloof",
    "Pleasant",
    "Invisible",
    "Smelly",
    "Weird",
    "Pungent",
    "Final",
    "Horrid",
    "Nasty",
    "Euphoric",
    "Trippy",
    "Dazed",
    "Dreamy",
    "Drowsy",
    "Foolish",
    "Crippled",
    "Screaming",
    "Poggers",
    "Flaccid",
    "Rotten",
    "Moist",
    "Simple",
    "Tasty",
    "Venti",
    "Grande",
    "Short",
    "Long",
    "Tall",
    "Seedy",
    "Toothy",
    "Robotic",
    "Feisty",
    "Dirty",
    "Soaked",
    "Squishy",
    "Distant",
    "Noobish",
    "Pwned",
    "Lanky",
    "Peppered",
    "Sad",
    "Moldy",
    "Spicy",
    "Bloody",
    "Cute",
    "Daring",
    "Creepy",
    "Curious",
    "Lazy",
    "Tyrant",
    "Anxious",
    "Adorable",
    "Grabby",
    "Handsy",
    "Panicking",
    "Combative",
    "Annoying",
    "Cryptic",
    "Wheezy",
    "Shady",
    "Thinking",
    "Insane",
    "Loose",
    "Limp",
    "Scary",
    "Furious",
    "Ecstatic",
    "Shady",
    "Derpy",
    "Burnt",
    "Tarnished",
    "Messy",
    "Birthday",
    "Alpha",
    "Beta",
    "Soggy",
    "Siamese",
    "Surprised"
];
var thingList = [
    "Dragon",
    "Poop",
    "Snow",
    "Vampire",
    "Hobo",
    "Jerky",
    "Moose",
    "Banana",
    "Coffee",
    "Monster",
    "Pile",
    "Zombie",
    "Mutant",
    "Boomer",
    "Jello",
    "Milk",
    "Boss",
    "Minion",
    "Pervert",
    "Kebab",
    "Frog",
    "Noob",
    "Nub",
    "Life",
    "Dream",
    "Snek",
    "Lizard",
    "Beetle",
    "Cat",
    "Wheezer",
    "Geezer",
    "Creeper",
    "Beast",
    "Peasant",
    "Thief",
    "Tech",
    "Orange",
    "Bread",
    "Wife",
    "Cuckold",
    "Actor",
    "Artist",
    "Doctor",
    "Monkey",
    "Ghost",
    "Camera",
    "Cookie",
    "Dealer",
    "Chef",
    "Knight",
    "Joker",
    "Blob",
    "Member",
    "Bird",
    "Crumpet",
    "Bagel",
    "Toast",
    "Goose",
    "Potato",
    "Dwarve",
    "Elf",
    "Loner",
    "Wolf",
    "Nerd",
    "Shadow"
];
var numList = [
    42,
    69,
    420,
    666,
    777,
    911,
    5000,
    6969,
    9001
];
var generatePlayerName = function () {
    var desc = descriptiveList[(0, exports.randInt)(0, descriptiveList.length)];
    var thing = thingList[(0, exports.randInt)(0, thingList.length)];
    var num = numList[(0, exports.randInt)(0, numList.length)];
    return "" + desc + thing + num;
};
exports.generatePlayerName = generatePlayerName;
var randInt = function (min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
};
exports.randInt = randInt;
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var helpers_1 = require("./helpers");
var websocket_1 = require("./modules/websocket");
var camera = document.querySelector('canvas');
var map_canvas = document.createElement('canvas');
var camera_ctx = camera.getContext('2d');
var map_ctx = camera.getContext('2d');
var siteLoader = document.getElementById('loader');
var loginOverlay = document.getElementById('login-overlay');
var startButton = document.getElementById('start-game');
var generateNameButton = document.getElementById('generate-name');
var username = document.getElementById('username');
var gameChatContainer = document.getElementById('game-chat');
var gameChatMessage = document.getElementById('message');
var sendMessageButton = document.getElementById('send-message');
var errorDisplayContainer = document.getElementById('error-display');
var errorList = [];
var mouse = {
    x: 0,
    y: 0
};
var renderBubbles = true;
function prepareStartForm() {
    startButton === null || startButton === void 0 ? void 0 : startButton.addEventListener('click', handleStart);
    generateNameButton === null || generateNameButton === void 0 ? void 0 : generateNameButton.addEventListener('click', generateName);
}
function generateName() {
    username.value = (0, helpers_1.generatePlayerName)();
    username.classList.remove();
}
function hideStartForm() {
    loginOverlay.classList.add('hidden');
}
function showGameChat() {
    gameChatContainer.classList.remove('hidden');
    sendMessageButton.addEventListener('click', sendMessage);
}
function sendMessage() {
    if (!gameChatMessage.value.trim().length) {
        return;
    }
    var msg = gameChatMessage.value.trim();
    console.log('sending msg', msg);
    gameChatMessage.value = "";
}
function handleStart() {
    username.classList.remove();
    if (!username.value.trim().length) {
        username.value = (0, helpers_1.generatePlayerName)();
    }
    else if (username.value.trim().length > 20) {
        username.classList.add("error");
        return;
    }
    startGame();
    hideStartForm();
    showGameChat();
    renderBubbles = false;
}
var ws = new WebSocket("ws://" + window.location.host);
ws.addEventListener('message', function (e) {
    e.data.arrayBuffer().then(function (arrayBuffer) {
        (0, websocket_1.decode)(arrayBuffer);
    });
});
function startGame() {
    (0, websocket_1.initPlayer)(ws, username.value);
    return true;
}
camera.addEventListener('mousemove', function (e) {
    var rect = camera.getBoundingClientRect();
    mouse.x = e.clientX - rect.left;
    mouse.y = e.clientY - rect.top;
});
window.addEventListener('resize', function () {
    resize();
});
function resize() {
    camera.width = window.innerWidth;
    camera.height = window.innerHeight;
}
var dots = [];
function addDot() {
    dots.push([
        (0, helpers_1.randInt)(0, 1920),
        (0, helpers_1.randInt)(0, 1080),
        (0, helpers_1.randInt)(-2, 3),
        (0, helpers_1.randInt)(-2, 3),
        (0, helpers_1.randInt)(0, 360),
        1 //Current size
    ]);
    if (renderBubbles)
        setTimeout(addDot, (0, helpers_1.randInt)(50, 200));
}
addDot();
function render() {
    camera_ctx.fillStyle = "#444";
    camera_ctx.fillRect(0, 0, camera.width, camera.height);
    if (renderBubbles) {
        for (var i = 0; i < dots.length; i++) {
            var dot = dots[i];
            camera_ctx.fillStyle = "hsl(" + dot[4] + ", 100%, 50%, " + 0.013333 * (50 - dot[5]) + ")";
            camera_ctx.beginPath();
            camera_ctx.arc(dot[0], dot[1], dot[5], 0, Math.PI * 2);
            camera_ctx.closePath();
            camera_ctx.fill();
            dot[0] += dot[2];
            dot[1] += dot[3];
            dot[5] += 0.5;
            if (dot[5] > 50) {
                dots.splice(i, 1);
            }
        }
    }
    else {
        camera_ctx.fillStyle = "#37bd37";
        camera_ctx.beginPath();
        camera_ctx.arc(mouse.x, mouse.y, 5, 0, Math.PI * 2);
        camera_ctx.fill();
        camera_ctx.closePath();
        camera_ctx.save();
        camera_ctx.setTransform(1, 0, 0, 1, camera.width / 2, camera.height / 2);
        camera_ctx.rotate(Math.atan2(mouse.y - camera.height / 2, mouse.x - camera.width / 2));
        camera_ctx.fillRect(-35, -15, 70, 30);
        camera_ctx.restore();
    }
    requestAnimationFrame(render);
}
prepareStartForm();
resize();
render();
setTimeout(function () {
    siteLoader.classList.add('hidden');
}, 500);
},{"./helpers":1,"./modules/websocket":3}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initPlayer = exports.decode = void 0;
var MESSAGE_TYPE;
(function (MESSAGE_TYPE) {
    MESSAGE_TYPE[MESSAGE_TYPE["NULL"] = 0] = "NULL";
    MESSAGE_TYPE[MESSAGE_TYPE["INIT"] = 1] = "INIT";
    MESSAGE_TYPE[MESSAGE_TYPE["PLAYER_UPDATE"] = 2] = "PLAYER_UPDATE";
    MESSAGE_TYPE[MESSAGE_TYPE["NEW_PLAYER"] = 3] = "NEW_PLAYER";
})(MESSAGE_TYPE || (MESSAGE_TYPE = {}));
var decode = function (msg) {
    var dv = new DataView(msg);
    var type = dv.getUint8(0);
    switch (type) {
        case MESSAGE_TYPE.INIT:
            console.log("Got INIT from server! Map size: " + dv.getUint16(1));
            break;
    }
};
exports.decode = decode;
var initPlayer = function (socket, name) {
    var message = new ArrayBuffer(1 + name.length);
    var dv = new DataView(message);
    dv.setUint8(0, MESSAGE_TYPE.INIT);
    for (var i = 0; i < name.length; i++) {
        dv.setUint8(i + 1, name.charCodeAt(i));
    }
    socket.send(message);
};
exports.initPlayer = initPlayer;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJwdWJsaWMvc3JjL2hlbHBlcnMudHMiLCJwdWJsaWMvc3JjL2luZGV4LnRzIiwicHVibGljL3NyYy9tb2R1bGVzL3dlYnNvY2tldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztBQ0FBLElBQU0sZUFBZSxHQUFHO0lBQ3BCLE9BQU87SUFDUCxNQUFNO0lBQ04sS0FBSztJQUNMLFFBQVE7SUFDUixPQUFPO0lBQ1AsUUFBUTtJQUNSLFdBQVc7SUFDWCxPQUFPO0lBQ1AsVUFBVTtJQUNWLFdBQVc7SUFDWCxRQUFRO0lBQ1IsT0FBTztJQUNQLFNBQVM7SUFDVCxPQUFPO0lBQ1AsUUFBUTtJQUNSLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsUUFBUTtJQUNSLFNBQVM7SUFDVCxVQUFVO0lBQ1YsV0FBVztJQUNYLFNBQVM7SUFDVCxTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsT0FBTztJQUNQLE9BQU87SUFDUCxRQUFRO0lBQ1IsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sT0FBTztJQUNQLFFBQVE7SUFDUixTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsU0FBUztJQUNULFNBQVM7SUFDVCxTQUFTO0lBQ1QsT0FBTztJQUNQLE9BQU87SUFDUCxVQUFVO0lBQ1YsS0FBSztJQUNMLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLE1BQU07SUFDTixRQUFRO0lBQ1IsUUFBUTtJQUNSLFNBQVM7SUFDVCxNQUFNO0lBQ04sUUFBUTtJQUNSLFNBQVM7SUFDVCxVQUFVO0lBQ1YsUUFBUTtJQUNSLFFBQVE7SUFDUixXQUFXO0lBQ1gsV0FBVztJQUNYLFVBQVU7SUFDVixTQUFTO0lBQ1QsUUFBUTtJQUNSLE9BQU87SUFDUCxVQUFVO0lBQ1YsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sT0FBTztJQUNQLFNBQVM7SUFDVCxVQUFVO0lBQ1YsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsV0FBVztJQUNYLE9BQU87SUFDUCxVQUFVO0lBQ1YsT0FBTztJQUNQLE1BQU07SUFDTixPQUFPO0lBQ1AsU0FBUztJQUNULFdBQVc7Q0FDZCxDQUFDO0FBQ0YsSUFBTSxTQUFTLEdBQUc7SUFDZCxRQUFRO0lBQ1IsTUFBTTtJQUNOLE1BQU07SUFDTixTQUFTO0lBQ1QsTUFBTTtJQUNOLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLFFBQVE7SUFDUixTQUFTO0lBQ1QsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sTUFBTTtJQUNOLFFBQVE7SUFDUixTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sS0FBSztJQUNMLE1BQU07SUFDTixPQUFPO0lBQ1AsTUFBTTtJQUNOLFFBQVE7SUFDUixRQUFRO0lBQ1IsS0FBSztJQUNMLFNBQVM7SUFDVCxRQUFRO0lBQ1IsU0FBUztJQUNULE9BQU87SUFDUCxTQUFTO0lBQ1QsT0FBTztJQUNQLE1BQU07SUFDTixRQUFRO0lBQ1IsT0FBTztJQUNQLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLFFBQVE7SUFDUixRQUFRO0lBQ1IsUUFBUTtJQUNSLE9BQU87SUFDUCxRQUFRO0lBQ1IsUUFBUTtJQUNSLFFBQVE7SUFDUixNQUFNO0lBQ04sUUFBUTtJQUNSLE9BQU87SUFDUCxNQUFNO0lBQ04sUUFBUTtJQUNSLE1BQU07SUFDTixTQUFTO0lBQ1QsT0FBTztJQUNQLE9BQU87SUFDUCxPQUFPO0lBQ1AsUUFBUTtJQUNSLFFBQVE7SUFDUixLQUFLO0lBQ0wsT0FBTztJQUNQLE1BQU07SUFDTixNQUFNO0lBQ04sUUFBUTtDQUNYLENBQUM7QUFDRixJQUFNLE9BQU8sR0FBRztJQUNaLEVBQUU7SUFDRixFQUFFO0lBQ0YsR0FBRztJQUNILEdBQUc7SUFD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LElBQVk7SUFDdEQsSUFBTSxPQUFPLEdBQUcsSUFBSSxXQUFXLENBQUMsQ0FBQyxHQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMvQyxJQUFNLEVBQUUsR0FBRyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVqQyxFQUFFLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEMsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDakMsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN4QztJQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekIsQ0FBQyxDQUFBO0FBWFksUUFBQSxVQUFVLGNBV3RCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY29uc3QgZGVzY3JpcHRpdmVMaXN0ID0gW1xyXG4gICAgXCJHcmVlblwiLFxyXG4gICAgXCJCbHVlXCIsXHJcbiAgICBcIlJlZFwiLFxyXG4gICAgXCJZZWxsb3dcIixcclxuICAgIFwiQnJvd25cIixcclxuICAgIFwiU3Ryb25nXCIsXHJcbiAgICBcIk1pc2VyYWJsZVwiLFxyXG4gICAgXCJBbG9vZlwiLFxyXG4gICAgXCJQbGVhc2FudFwiLFxyXG4gICAgXCJJbnZpc2libGVcIixcclxuICAgIFwiU21lbGx5XCIsXHJcbiAgICBcIldlaXJkXCIsXHJcbiAgICBcIlB1bmdlbnRcIixcclxuICAgIFwiRmluYWxcIixcclxuICAgIFwiSG9ycmlkXCIsXHJcbiAgICBcIk5hc3R5XCIsXHJcbiAgICBcIkV1cGhvcmljXCIsXHJcbiAgICBcIlRyaXBweVwiLFxyXG4gICAgXCJEYXplZFwiLFxyXG4gICAgXCJEcmVhbXlcIixcclxuICAgIFwiRHJvd3N5XCIsXHJcbiAgICBcIkZvb2xpc2hcIixcclxuICAgIFwiQ3JpcHBsZWRcIixcclxuICAgIFwiU2NyZWFtaW5nXCIsXHJcbiAgICBcIlBvZ2dlcnNcIixcclxuICAgIFwiRmxhY2NpZFwiLFxyXG4gICAgXCJSb3R0ZW5cIixcclxuICAgIFwiTW9pc3RcIixcclxuICAgIFwiU2ltcGxlXCIsXHJcbiAgICBcIlRhc3R5XCIsXHJcbiAgICBcIlZlbnRpXCIsXHJcbiAgICBcIkdyYW5kZVwiLFxyXG4gICAgXCJTaG9ydFwiLFxyXG4gICAgXCJMb25nXCIsXHJcbiAgICBcIlRhbGxcIixcclxuICAgIFwiU2VlZHlcIixcclxuICAgIFwiVG9vdGh5XCIsXHJcbiAgICBcIlJvYm90aWNcIixcclxuICAgIFwiRmVpc3R5XCIsXHJcbiAgICBcIkRpcnR5XCIsXHJcbiAgICBcIlNvYWtlZFwiLFxyXG4gICAgXCJTcXVpc2h5XCIsXHJcbiAgICBcIkRpc3RhbnRcIixcclxuICAgIFwiTm9vYmlzaFwiLFxyXG4gICAgXCJQd25lZFwiLFxyXG4gICAgXCJMYW5reVwiLFxyXG4gICAgXCJQZXBwZXJlZFwiLFxyXG4gICAgXCJTYWRcIixcclxuICAgIFwiTW9sZHlcIixcclxuICAgIFwiU3BpY3lcIixcclxuICAgIFwiQmxvb2R5XCIsXHJcbiAgICBcIkN1dGVcIixcclxuICAgIFwiRGFyaW5nXCIsXHJcbiAgICBcIkNyZWVweVwiLFxyXG4gICAgXCJDdXJpb3VzXCIsXHJcbiAgICBcIkxhenlcIixcclxuICAgIFwiVHlyYW50XCIsXHJcbiAgICBcIkFueGlvdXNcIixcclxuICAgIFwiQWRvcmFibGVcIixcclxuICAgIFwiR3JhYmJ5XCIsXHJcbiAgICBcIkhhbmRzeVwiLFxyXG4gICAgXCJQYW5pY2tpbmdcIixcclxuICAgIFwiQ29tYmF0aXZlXCIsXHJcbiAgICBcIkFubm95aW5nXCIsXHJcbiAgICBcIkNyeXB0aWNcIixcclxuICAgIFwiV2hlZXp5XCIsXHJcbiAgICBcIlNoYWR5XCIsXHJcbiAgICBcIlRoaW5raW5nXCIsXHJcbiAgICBcIkluc2FuZVwiLFxyXG4gICAgXCJMb29zZVwiLFxyXG4gICAgXCJMaW1wXCIsXHJcbiAgICBcIlNjYXJ5XCIsXHJcbiAgICBcIkZ1cmlvdXNcIixcclxuICAgIFwiRWNzdGF0aWNcIixcclxuICAgIFwiU2hhZHlcIixcclxuICAgIFwiRGVycHlcIixcclxuICAgIFwiQnVybnRcIixcclxuICAgIFwiVGFybmlzaGVkXCIsXHJcbiAgICBcIk1lc3N5XCIsXHJcbiAgICBcIkJpcnRoZGF5XCIsXHJcbiAgICBcIkFscGhhXCIsXHJcbiAgICBcIkJldGFcIixcclxuICAgIFwiU29nZ3lcIixcclxuICAgIFwiU2lhbWVzZVwiLFxyXG4gICAgXCJTdXJwcmlzZWRcIlxyXG5dO1xyXG5jb25zdCB0aGluZ0xpc3QgPSBbXHJcbiAgICBcIkRyYWdvblwiLFxyXG4gICAgXCJQb29wXCIsXHJcbiAgICBcIlNub3dcIixcclxuICAgIFwiVmFtcGlyZVwiLFxyXG4gICAgXCJIb2JvXCIsXHJcbiAgICBcIkplcmt5XCIsXHJcbiAgICBcIk1vb3NlXCIsXHJcbiAgICBcIkJhbmFuYVwiLFxyXG4gICAgXCJDb2ZmZWVcIixcclxuICAgIFwiTW9uc3RlclwiLFxyXG4gICAgXCJQaWxlXCIsXHJcbiAgICBcIlpvbWJpZVwiLFxyXG4gICAgXCJNdXRhbnRcIixcclxuICAgIFwiQm9vbWVyXCIsXHJcbiAgICBcIkplbGxvXCIsXHJcbiAgICBcIk1pbGtcIixcclxuICAgIFwiQm9zc1wiLFxyXG4gICAgXCJNaW5pb25cIixcclxuICAgIFwiUGVydmVydFwiLFxyXG4gICAgXCJLZWJhYlwiLFxyXG4gICAgXCJGcm9nXCIsXHJcbiAgICBcIk5vb2JcIixcclxuICAgIFwiTnViXCIsXHJcbiAgICBcIkxpZmVcIixcclxuICAgIFwiRHJlYW1cIixcclxuICAgIFwiU25la1wiLFxyXG4gICAgXCJMaXphcmRcIixcclxuICAgIFwiQmVldGxlXCIsXHJcbiAgICBcIkNhdFwiLFxyXG4gICAgXCJXaGVlemVyXCIsXHJcbiAgICBcIkdlZXplclwiLFxyXG4gICAgXCJDcmVlcGVyXCIsXHJcbiAgICBcIkJlYXN0XCIsXHJcbiAgICBcIlBlYXNhbnRcIixcclxuICAgIFwiVGhpZWZcIixcclxuICAgIFwiVGVjaFwiLFxyXG4gICAgXCJPcmFuZ2VcIixcclxuICAgIFwiQnJlYWRcIixcclxuICAgIFwiV2lmZVwiLFxyXG4gICAgXCJDdWNrb2xkXCIsXHJcbiAgICBcIkFjdG9yXCIsXHJcbiAgICBcIkFydGlzdFwiLFxyXG4gICAgXCJEb2N0b3JcIixcclxuICAgIFwiTW9ua2V5XCIsXHJcbiAgICBcIkdob3N0XCIsXHJcbiAgICBcIkNhbWVyYVwiLFxyXG4gICAgXCJDb29raWVcIixcclxuICAgIFwiRGVhbGVyXCIsXHJcbiAgICBcIkNoZWZcIixcclxuICAgIFwiS25pZ2h0XCIsXHJcbiAgICBcIkpva2VyXCIsXHJcbiAgICBcIkJsb2JcIixcclxuICAgIFwiTWVtYmVyXCIsXHJcbiAgICBcIkJpcmRcIixcclxuICAgIFwiQ3J1bXBldFwiLFxyXG4gICAgXCJCYWdlbFwiLFxyXG4gICAgXCJUb2FzdFwiLFxyXG4gICAgXCJHb29zZVwiLFxyXG4gICAgXCJQb3RhdG9cIixcclxuICAgIFwiRHdhcnZlXCIsXHJcbiAgICBcIkVsZlwiLFxyXG4gICAgXCJMb25lclwiLFxyXG4gICAgXCJXb2xmXCIsXHJcbiAgICBcIk5lcmRcIixcclxuICAgIFwiU2hhZG93XCJcclxuXTtcclxuY29uc3QgbnVtTGlzdCA9IFtcclxuICAgIDQyLFxyXG4gICAgNjksXHJcbiAgICA0MjAsXHJcbiAgICA2NjYsXHJcbiAgICA3NzcsXHJcbiAgICA5MTEsXHJcbiAgICA1MDAwLFxyXG4gICAgNjk2OSxcclxuICAgIDkwMDFcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBnZW5lcmF0ZVBsYXllck5hbWUgPSAoKTogc3RyaW5nID0+IHtcclxuICAgIGxldCBkZXNjID0gZGVzY3JpcHRpdmVMaXN0W3JhbmRJbnQoMCwgZGVzY3JpcHRpdmVMaXN0Lmxlbmd0aCldO1xyXG4gICAgbGV0IHRoaW5nID0gdGhpbmdMaXN0W3JhbmRJbnQoMCwgdGhpbmdMaXN0Lmxlbmd0aCldO1xyXG4gICAgbGV0IG51bSA9IG51bUxpc3RbcmFuZEludCgwLCBudW1MaXN0Lmxlbmd0aCldO1xyXG4gICAgcmV0dXJuIGAke2Rlc2N9JHt0aGluZ30ke251bX1gO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmFuZEludCA9IChtaW46bnVtYmVyLCBtYXg6bnVtYmVyKTogbnVtYmVyID0+IHtcclxuICAgIG1pbiA9IE1hdGguY2VpbChtaW4pO1xyXG4gICAgbWF4ID0gTWF0aC5mbG9vcihtYXgpO1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluKTsgLy9UaGUgbWF4aW11bSBpcyBleGNsdXNpdmUgYW5kIHRoZSBtaW5pbXVtIGlzIGluY2x1c2l2ZVxyXG59IiwiaW1wb3J0IHtnZW5lcmF0ZVBsYXllck5hbWUsIHJhbmRJbnR9IGZyb20gJy4vaGVscGVycyc7XHJcbmltcG9ydCB7aW5pdFBsYXllciwgZGVjb2RlfSBmcm9tICcuL21vZHVsZXMvd2Vic29ja2V0JztcclxuXHJcbmNvbnN0IGNhbWVyYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcycpITtcclxuY29uc3QgbWFwX2NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG5jb25zdCBjYW1lcmFfY3R4ID0gY2FtZXJhLmdldENvbnRleHQoJzJkJykhO1xyXG5jb25zdCBtYXBfY3R4ID0gY2FtZXJhLmdldENvbnRleHQoJzJkJykhO1xyXG5cclxuY29uc3Qgc2l0ZUxvYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkZXInKSE7XHJcblxyXG5jb25zdCBsb2dpbk92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tb3ZlcmxheScpITtcclxuY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQtZ2FtZScpITtcclxuY29uc3QgZ2VuZXJhdGVOYW1lQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbmVyYXRlLW5hbWUnKSE7XHJcbmNvbnN0IHVzZXJuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJuYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHJcbmNvbnN0IGdhbWVDaGF0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUtY2hhdCcpITtcclxuY29uc3QgZ2FtZUNoYXRNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2UnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5jb25zdCBzZW5kTWVzc2FnZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZW5kLW1lc3NhZ2UnKSE7XHJcblxyXG5jb25zdCBlcnJvckRpc3BsYXlDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXJyb3ItZGlzcGxheScpITtcclxubGV0IGVycm9yTGlzdCA9IFtdO1xyXG5cclxuXHJcbmNvbnN0IG1vdXNlID0ge1xyXG4gICAgeDogMCxcclxuICAgIHk6IDBcclxufVxyXG5cclxubGV0IHJlbmRlckJ1YmJsZXMgPSB0cnVlO1xyXG5cclxuZnVuY3Rpb24gcHJlcGFyZVN0YXJ0Rm9ybSgpIHtcclxuICAgIHN0YXJ0QnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVN0YXJ0KTtcclxuICAgIGdlbmVyYXRlTmFtZUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBnZW5lcmF0ZU5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZU5hbWUoKSB7XHJcbiAgICB1c2VybmFtZS52YWx1ZSA9IGdlbmVyYXRlUGxheWVyTmFtZSgpO1xyXG4gICAgdXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlU3RhcnRGb3JtKCkge1xyXG4gICAgbG9naW5PdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG59XHJcbmZ1bmN0aW9uIHNob3dHYW1lQ2hhdCgpIHtcclxuICAgIGdhbWVDaGF0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgc2VuZE1lc3NhZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZW5kTWVzc2FnZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkge1xyXG4gICAgaWYgKCFnYW1lQ2hhdE1lc3NhZ2UudmFsdWUudHJpbSgpLmxlbmd0aCkge1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgbGV0IG1zZyA9IGdhbWVDaGF0TWVzc2FnZS52YWx1ZS50cmltKCk7XHJcbiAgICBjb25zb2xlLmxvZygnc2VuZGluZyBtc2cnLCBtc2cpO1xyXG5cclxuICAgIGdhbWVDaGF0TWVzc2FnZS52YWx1ZSA9IFwiXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN0YXJ0KCkge1xyXG4gICAgdXNlcm5hbWUuY2xhc3NMaXN0LnJlbW92ZSgpO1xyXG4gICAgaWYgKCF1c2VybmFtZS52YWx1ZS50cmltKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgdXNlcm5hbWUudmFsdWUgPSBnZW5lcmF0ZVBsYXllck5hbWUoKTtcclxuICAgIH0gZWxzZSBpZiAodXNlcm5hbWUudmFsdWUudHJpbSgpLmxlbmd0aCA+IDIwKSB7XHJcbiAgICAgICAgdXNlcm5hbWUuY2xhc3NMaXN0LmFkZChcImVycm9yXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHN0YXJ0R2FtZSgpXHJcbiAgICBoaWRlU3RhcnRGb3JtKCk7XHJcbiAgICBzaG93R2FtZUNoYXQoKTtcclxuICAgIHJlbmRlckJ1YmJsZXMgPSBmYWxzZTtcclxufVxyXG5cclxuY29uc3Qgd3MgPSBuZXcgV2ViU29ja2V0KGB3czovLyR7d2luZG93LmxvY2F0aW9uLmhvc3R9YCk7XHJcblxyXG53cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZSA9PiB7XHJcbiAgICAoZS5kYXRhIGFzIEJsb2IpLmFycmF5QnVmZmVyKCkudGhlbihhcnJheUJ1ZmZlciA9PiB7XHJcbiAgICAgICAgZGVjb2RlKGFycmF5QnVmZmVyKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcclxuICAgIGluaXRQbGF5ZXIod3MsIHVzZXJuYW1lLnZhbHVlKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRydWVcclxufVxyXG5cclxuY2FtZXJhLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGUgPT4ge1xyXG4gICAgY29uc3QgcmVjdCA9IGNhbWVyYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICBtb3VzZS54ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0XHJcbiAgICBtb3VzZS55ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7XHJcbn0pO1xyXG5cclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHtcclxuICAgIHJlc2l6ZSgpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHJlc2l6ZSgpIHtcclxuICAgIGNhbWVyYS53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgY2FtZXJhLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxufVxyXG5cclxuY29uc3QgZG90czogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcclxuXHJcbmZ1bmN0aW9uIGFkZERvdCgpIHtcclxuICAgIGRvdHMucHVzaChbXHJcbiAgICAgICAgcmFuZEludCgwLCAxOTIwKSwgLy94XHJcbiAgICAgICAgcmFuZEludCgwLCAxMDgwKSwgLy95XHJcbiAgICAgICAgcmFuZEludCgtMiwgMyksXHJcbiAgICAgICAgcmFuZEludCgtMiwgMyksXHJcbiAgICAgICAgcmFuZEludCgwLCAzNjApLCAvL0hTTCBodWVcclxuICAgICAgICAxIC8vQ3VycmVudCBzaXplXHJcbiAgICBdKTtcclxuXHJcbiAgICBpZihyZW5kZXJCdWJibGVzKSBzZXRUaW1lb3V0KGFkZERvdCwgcmFuZEludCg1MCwgMjAwKSk7XHJcbn1cclxuXHJcbmFkZERvdCgpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgY2FtZXJhX2N0eC5maWxsU3R5bGUgPSBcIiM0NDRcIjtcclxuXHJcbiAgICBjYW1lcmFfY3R4LmZpbGxSZWN0KDAsIDAsIGNhbWVyYS53aWR0aCwgY2FtZXJhLmhlaWdodCk7XHJcblxyXG4gICAgaWYocmVuZGVyQnViYmxlcykge1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBkb3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvdCA9IGRvdHNbaV07XHJcbiAgICBcclxuICAgICAgICAgICAgY2FtZXJhX2N0eC5maWxsU3R5bGUgPSBgaHNsKCR7ZG90WzRdfSwgMTAwJSwgNTAlLCAkezAuMDEzMzMzICogKDUwIC0gZG90WzVdKX0pYDtcclxuICAgIFxyXG4gICAgICAgICAgICBjYW1lcmFfY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjYW1lcmFfY3R4LmFyYyhkb3RbMF0sIGRvdFsxXSwgZG90WzVdLCAwLCBNYXRoLlBJICogMik7XHJcbiAgICAgICAgICAgIGNhbWVyYV9jdHguY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIGNhbWVyYV9jdHguZmlsbCgpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGRvdFswXSArPSBkb3RbMl07XHJcbiAgICAgICAgICAgIGRvdFsxXSArPSBkb3RbM107XHJcbiAgICAgICAgICAgIGRvdFs1XSArPSAwLjU7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYoZG90WzVdID4gNTApIHtcclxuICAgICAgICAgICAgICAgIGRvdHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjYW1lcmFfY3R4LmZpbGxTdHlsZSA9IFwiIzM3YmQzN1wiO1xyXG5cclxuICAgICAgICBjYW1lcmFfY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNhbWVyYV9jdHguYXJjKG1vdXNlLngsIG1vdXNlLnksIDUsIDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICBjYW1lcmFfY3R4LmZpbGwoKTtcclxuICAgICAgICBjYW1lcmFfY3R4LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBjYW1lcmFfY3R4LnNhdmUoKTtcclxuICAgICAgICBjYW1lcmFfY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCBjYW1lcmEud2lkdGgvMiwgY2FtZXJhLmhlaWdodC8yKTtcclxuICAgICAgICBjYW1lcmFfY3R4LnJvdGF0ZShNYXRoLmF0YW4yKG1vdXNlLnkgLSBjYW1lcmEuaGVpZ2h0LzIsIG1vdXNlLnggLSBjYW1lcmEud2lkdGgvMikpO1xyXG4gICAgICAgIGNhbWVyYV9jdHguZmlsbFJlY3QoLTM1LCAtMTUsIDcwLCAzMCk7XHJcbiAgICAgICAgY2FtZXJhX2N0eC5yZXN0b3JlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlbmRlcik7XHJcbn1cclxuXHJcbnByZXBhcmVTdGFydEZvcm0oKTtcclxucmVzaXplKCk7XHJcbnJlbmRlcigpO1xyXG5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICBzaXRlTG9hZGVyLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG59LCA1MDApO1xyXG4iLCJlbnVtIE1FU1NBR0VfVFlQRSB7XHJcbiAgICBOVUxMID0gMCxcclxuICAgIElOSVQsXHJcbiAgICBQTEFZRVJfVVBEQVRFLFxyXG4gICAgTkVXX1BMQVlFUixcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBkZWNvZGUgPSAobXNnOiBBcnJheUJ1ZmZlcikgPT4ge1xyXG4gICAgY29uc3QgZHYgPSBuZXcgRGF0YVZpZXcobXNnKTtcclxuICAgIGNvbnN0IHR5cGUgPSBkdi5nZXRVaW50OCgwKTtcclxuXHJcbiAgICBzd2l0Y2godHlwZSkge1xyXG4gICAgICAgIGNhc2UgTUVTU0FHRV9UWVBFLklOSVQ6XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBHb3QgSU5JVCBmcm9tIHNlcnZlciEgTWFwIHNpemU6ICR7ZHYuZ2V0VWludDE2KDEpfWApO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRQbGF5ZXIgPSAoc29ja2V0OiBXZWJTb2NrZXQsIG5hbWU6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgbWVzc2FnZSA9IG5ldyBBcnJheUJ1ZmZlcigxK25hbWUubGVuZ3RoKTtcclxuICAgIGNvbnN0IGR2ID0gbmV3IERhdGFWaWV3KG1lc3NhZ2UpO1xyXG5cclxuICAgIGR2LnNldFVpbnQ4KDAsIE1FU1NBR0VfVFlQRS5JTklUKTtcclxuXHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGR2LnNldFVpbnQ4KGkrMSwgbmFtZS5jaGFyQ29kZUF0KGkpKTtcclxuICAgIH1cclxuXHJcbiAgICBzb2NrZXQuc2VuZChtZXNzYWdlKTtcclxufSJdfQ==
